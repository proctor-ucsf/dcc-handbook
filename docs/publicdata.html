<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Making Data Public | Proctor Foundation Data Science Handbook</title>
  <meta name="description" content="This is a handbook to help summarize best practices in data science among team members at the Francis I. Proctor Foundation." />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Making Data Public | Proctor Foundation Data Science Handbook" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a handbook to help summarize best practices in data science among team members at the Francis I. Proctor Foundation." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Making Data Public | Proctor Foundation Data Science Handbook" />
  
  <meta name="twitter:description" content="This is a handbook to help summarize best practices in data science among team members at the Francis I. Proctor Foundation." />
  

<meta name="author" content="Contributors: Ben Arnold, Jade Benjamin-Chung, Kunal Mishra, Anna Nguyen, Nolan Pokpongkiat, Stephanie Djajadi, Eric Kim, Will Godwin, Fanice Nyatigo (many from UC Berkeley in addition to Proctor)" />


<meta name="date" content="2024-05-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="datawrangling.html"/>
<link rel="next" href="bigdata.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Proctor Data Science Handbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction: Work Flow and Reproducible Analyses</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#workflow"><i class="fa fa-check"></i><b>1.1</b> Workflow</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#reproducibility"><i class="fa fa-check"></i><b>1.2</b> Reproducibility</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#automation"><i class="fa fa-check"></i><b>1.3</b> Automation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="workflows.html"><a href="workflows.html"><i class="fa fa-check"></i><b>2</b> Workflows</a></li>
<li class="chapter" data-level="3" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html"><i class="fa fa-check"></i><b>3</b> Directory Structure and Code Repositories</a>
<ul>
<li class="chapter" data-level="3.1" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#small-and-large-projects"><i class="fa fa-check"></i><b>3.1</b> Small and large projects</a></li>
<li class="chapter" data-level="3.2" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#directory-structure"><i class="fa fa-check"></i><b>3.2</b> Directory Structure</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#first-level-data-and-analyses"><i class="fa fa-check"></i><b>3.2.1</b> First level: data and analyses</a></li>
<li class="chapter" data-level="3.2.2" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#second-level-data"><i class="fa fa-check"></i><b>3.2.2</b> Second level: data</a></li>
<li class="chapter" data-level="3.2.3" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#second-level-projects"><i class="fa fa-check"></i><b>3.2.3</b> Second level: projects</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#code-repositories"><i class="fa fa-check"></i><b>3.3</b> Code Repositories</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#rproj-files"><i class="fa fa-check"></i><b>3.3.1</b> <code>.Rproj</code> files</a></li>
<li class="chapter" data-level="3.3.2" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#configuration-config-file"><i class="fa fa-check"></i><b>3.3.2</b> Configuration (‘config’) File</a></li>
<li class="chapter" data-level="3.3.3" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#shared-functions-file"><i class="fa fa-check"></i><b>3.3.3</b> Shared Functions File</a></li>
<li class="chapter" data-level="3.3.4" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#order-files-and-subdirectories"><i class="fa fa-check"></i><b>3.3.4</b> Order Files and Subdirectories</a></li>
<li class="chapter" data-level="3.3.5" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#use-bash-scripts-or-r-scripts-to-ensure-reproducibility"><i class="fa fa-check"></i><b>3.3.5</b> Use Bash scripts or R scripts to ensure reproducibility</a></li>
<li class="chapter" data-level="3.3.6" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#alternative-approach-for-code-repos"><i class="fa fa-check"></i><b>3.3.6</b> Alternative approach for code repos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="codingpractices.html"><a href="codingpractices.html"><i class="fa fa-check"></i><b>4</b> Coding Practices</a>
<ul>
<li class="chapter" data-level="4.1" data-path="codingpractices.html"><a href="codingpractices.html#organizing-scripts"><i class="fa fa-check"></i><b>4.1</b> Organizing scripts</a></li>
<li class="chapter" data-level="4.2" data-path="codingpractices.html"><a href="codingpractices.html#documenting-your-code"><i class="fa fa-check"></i><b>4.2</b> Documenting your code</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="codingpractices.html"><a href="codingpractices.html#file-headers"><i class="fa fa-check"></i><b>4.2.1</b> File headers</a></li>
<li class="chapter" data-level="4.2.2" data-path="codingpractices.html"><a href="codingpractices.html#comments-in-the-body-of-your-script"><i class="fa fa-check"></i><b>4.2.2</b> Comments in the body of your script</a></li>
<li class="chapter" data-level="4.2.3" data-path="codingpractices.html"><a href="codingpractices.html#function-documentation"><i class="fa fa-check"></i><b>4.2.3</b> Function documentation</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="codingpractices.html"><a href="codingpractices.html#object-naming"><i class="fa fa-check"></i><b>4.3</b> Object naming</a></li>
<li class="chapter" data-level="4.4" data-path="codingpractices.html"><a href="codingpractices.html#function-calls"><i class="fa fa-check"></i><b>4.4</b> Function calls</a></li>
<li class="chapter" data-level="4.5" data-path="codingpractices.html"><a href="codingpractices.html#the-here-package"><i class="fa fa-check"></i><b>4.5</b> The <code>here</code> package</a></li>
<li class="chapter" data-level="4.6" data-path="codingpractices.html"><a href="codingpractices.html#tidyverse"><i class="fa fa-check"></i><b>4.6</b> Tidyverse</a></li>
<li class="chapter" data-level="4.7" data-path="codingpractices.html"><a href="codingpractices.html#coding-with-r-and-python"><i class="fa fa-check"></i><b>4.7</b> Coding with R and Python</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="codingstyle.html"><a href="codingstyle.html"><i class="fa fa-check"></i><b>5</b> Coding Style</a>
<ul>
<li class="chapter" data-level="5.1" data-path="codingstyle.html"><a href="codingstyle.html#line-breaks"><i class="fa fa-check"></i><b>5.1</b> Line breaks</a></li>
<li class="chapter" data-level="5.2" data-path="codingstyle.html"><a href="codingstyle.html#automated-tools-for-style-and-project-workflow"><i class="fa fa-check"></i><b>5.2</b> Automated Tools for Style and Project Workflow</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="codingstyle.html"><a href="codingstyle.html#styling"><i class="fa fa-check"></i><b>5.2.1</b> Styling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="datawrangling.html"><a href="datawrangling.html"><i class="fa fa-check"></i><b>6</b> Data Wrangling</a>
<ul>
<li class="chapter" data-level="6.1" data-path="datawrangling.html"><a href="datawrangling.html#overview"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="datawrangling.html"><a href="datawrangling.html#cardinal-rule"><i class="fa fa-check"></i><b>6.2</b> Cardinal rule</a></li>
<li class="chapter" data-level="6.3" data-path="datawrangling.html"><a href="datawrangling.html#data-inputoutput-io"><i class="fa fa-check"></i><b>6.3</b> Data input/output (I/O)</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="datawrangling.html"><a href="datawrangling.html#excel-files"><i class="fa fa-check"></i><b>6.3.1</b> Excel files</a></li>
<li class="chapter" data-level="6.3.2" data-path="datawrangling.html"><a href="datawrangling.html#rds-vs-.rdata-files"><i class="fa fa-check"></i><b>6.3.2</b> <code>.RDS</code> vs <code>.RData</code> Files</a></li>
<li class="chapter" data-level="6.3.3" data-path="datawrangling.html"><a href="datawrangling.html#csv-files"><i class="fa fa-check"></i><b>6.3.3</b> <code>.CSV</code> Files</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="datawrangling.html"><a href="datawrangling.html#documenting-datasets"><i class="fa fa-check"></i><b>6.4</b> Documenting datasets</a></li>
<li class="chapter" data-level="6.5" data-path="datawrangling.html"><a href="datawrangling.html#mapping-data-from-untouched---final"><i class="fa fa-check"></i><b>6.5</b> Mapping data from untouched -&gt; final</a></li>
<li class="chapter" data-level="6.6" data-path="datawrangling.html"><a href="datawrangling.html#relational-data"><i class="fa fa-check"></i><b>6.6</b> Relational data</a></li>
<li class="chapter" data-level="6.7" data-path="datawrangling.html"><a href="datawrangling.html#be-careful-with-joins-merges"><i class="fa fa-check"></i><b>6.7</b> Be careful with joins / merges</a></li>
<li class="chapter" data-level="6.8" data-path="datawrangling.html"><a href="datawrangling.html#reshaping-data"><i class="fa fa-check"></i><b>6.8</b> Reshaping data</a></li>
<li class="chapter" data-level="6.9" data-path="datawrangling.html"><a href="datawrangling.html#data-cleaning"><i class="fa fa-check"></i><b>6.9</b> Data cleaning</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="publicdata.html"><a href="publicdata.html"><i class="fa fa-check"></i><b>7</b> Making Data Public</a>
<ul>
<li class="chapter" data-level="7.1" data-path="publicdata.html"><a href="publicdata.html#overview-1"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="publicdata.html"><a href="publicdata.html#removing-phi"><i class="fa fa-check"></i><b>7.2</b> Removing PHI</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="publicdata.html"><a href="publicdata.html#personal-information"><i class="fa fa-check"></i><b>7.2.1</b> Personal information</a></li>
<li class="chapter" data-level="7.2.2" data-path="publicdata.html"><a href="publicdata.html#dates"><i class="fa fa-check"></i><b>7.2.2</b> Dates</a></li>
<li class="chapter" data-level="7.2.3" data-path="publicdata.html"><a href="publicdata.html#geographic-information"><i class="fa fa-check"></i><b>7.2.3</b> Geographic information</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="publicdata.html"><a href="publicdata.html#create-public-ids"><i class="fa fa-check"></i><b>7.3</b> Create public IDs</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="publicdata.html"><a href="publicdata.html#rationale"><i class="fa fa-check"></i><b>7.3.1</b> Rationale</a></li>
<li class="chapter" data-level="7.3.2" data-path="publicdata.html"><a href="publicdata.html#a-single-set-of-public-ids-for-each-study"><i class="fa fa-check"></i><b>7.3.2</b> A single set of public IDs for each study</a></li>
<li class="chapter" data-level="7.3.3" data-path="publicdata.html"><a href="publicdata.html#example-scripts"><i class="fa fa-check"></i><b>7.3.3</b> Example scripts</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="publicdata.html"><a href="publicdata.html#create-a-data-repository"><i class="fa fa-check"></i><b>7.4</b> Create a data repository</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="publicdata.html"><a href="publicdata.html#steps-for-creating-an-open-science-framework-osf-repository"><i class="fa fa-check"></i><b>7.4.1</b> Steps for creating an Open Science Framework (OSF) repository:</a></li>
<li class="chapter" data-level="7.4.2" data-path="publicdata.html"><a href="publicdata.html#steps-for-creating-a-dryad-data-repository"><i class="fa fa-check"></i><b>7.4.2</b> Steps for creating a Dryad data repository:</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="publicdata.html"><a href="publicdata.html#edit-and-test-analysis-scripts"><i class="fa fa-check"></i><b>7.5</b> Edit and test analysis scripts</a></li>
<li class="chapter" data-level="7.6" data-path="publicdata.html"><a href="publicdata.html#create-a-public-github-page-for-public-scripts"><i class="fa fa-check"></i><b>7.6</b> Create a public GitHub page for public scripts</a></li>
<li class="chapter" data-level="7.7" data-path="publicdata.html"><a href="publicdata.html#go-live"><i class="fa fa-check"></i><b>7.7</b> Go live</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="bigdata.html"><a href="bigdata.html"><i class="fa fa-check"></i><b>8</b> Working with Big Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="bigdata.html"><a href="bigdata.html#basics"><i class="fa fa-check"></i><b>8.1</b> Basics</a></li>
<li class="chapter" data-level="8.2" data-path="bigdata.html"><a href="bigdata.html#using-downsampled-data"><i class="fa fa-check"></i><b>8.2</b> Using downsampled data</a></li>
<li class="chapter" data-level="8.3" data-path="bigdata.html"><a href="bigdata.html#big-data-unix"><i class="fa fa-check"></i><b>8.3</b> Unix</a></li>
<li class="chapter" data-level="8.4" data-path="bigdata.html"><a href="bigdata.html#sql-and-dbplyr"><i class="fa fa-check"></i><b>8.4</b> SQL and <code>dbplyr</code></a></li>
<li class="chapter" data-level="8.5" data-path="bigdata.html"><a href="bigdata.html#data.table-and-dtplyr"><i class="fa fa-check"></i><b>8.5</b> <code>data.table</code> and <code>dtplyr</code></a></li>
<li class="chapter" data-level="8.6" data-path="bigdata.html"><a href="bigdata.html#ff-bigmemory-biglm"><i class="fa fa-check"></i><b>8.6</b> <code>ff</code>, <code>bigmemory</code>, <code>biglm</code></a></li>
<li class="chapter" data-level="8.7" data-path="bigdata.html"><a href="bigdata.html#parallel-computing"><i class="fa fa-check"></i><b>8.7</b> Parallel computing</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="bigdata.html"><a href="bigdata.html#embarrassingly-parallel-problems"><i class="fa fa-check"></i><b>8.7.1</b> Embarrassingly Parallel Problems</a></li>
<li class="chapter" data-level="8.7.2" data-path="bigdata.html"><a href="bigdata.html#packages"><i class="fa fa-check"></i><b>8.7.2</b> Packages</a></li>
<li class="chapter" data-level="8.7.3" data-path="bigdata.html"><a href="bigdata.html#gpus"><i class="fa fa-check"></i><b>8.7.3</b> GPU’s</a></li>
<li class="chapter" data-level="8.7.4" data-path="bigdata.html"><a href="bigdata.html#the-mapreduce-paradigm"><i class="fa fa-check"></i><b>8.7.4</b> The <em>MapReduce</em> paradigm</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="bigdata.html"><a href="bigdata.html#optimal-rstudio-set-up"><i class="fa fa-check"></i><b>8.8</b> Optimal RStudio set up</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>9</b> GitHub and Version Control</a>
<ul>
<li class="chapter" data-level="9.1" data-path="github.html"><a href="github.html#basics-1"><i class="fa fa-check"></i><b>9.1</b> Basics</a></li>
<li class="chapter" data-level="9.2" data-path="github.html"><a href="github.html#git-branching"><i class="fa fa-check"></i><b>9.2</b> Git Branching</a></li>
<li class="chapter" data-level="9.3" data-path="github.html"><a href="github.html#example-workflow"><i class="fa fa-check"></i><b>9.3</b> Example Workflow</a></li>
<li class="chapter" data-level="9.4" data-path="github.html"><a href="github.html#commonly-used-git-commands"><i class="fa fa-check"></i><b>9.4</b> Commonly Used Git Commands</a></li>
<li class="chapter" data-level="9.5" data-path="github.html"><a href="github.html#how-often-should-i-commit"><i class="fa fa-check"></i><b>9.5</b> How often should I commit?</a></li>
<li class="chapter" data-level="9.6" data-path="github.html"><a href="github.html#what-should-be-pushed-to-github"><i class="fa fa-check"></i><b>9.6</b> What should be pushed to Github?</a></li>
<li class="chapter" data-level="9.7" data-path="github.html"><a href="github.html#how-should-i-describe-my-commit"><i class="fa fa-check"></i><b>9.7</b> How should I describe my commit?</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="unix.html"><a href="unix.html"><i class="fa fa-check"></i><b>10</b> UNIX Commands</a>
<ul>
<li class="chapter" data-level="10.1" data-path="unix.html"><a href="unix.html#environment"><i class="fa fa-check"></i><b>10.1</b> Environment</a></li>
<li class="chapter" data-level="10.2" data-path="unix.html"><a href="unix.html#basics-2"><i class="fa fa-check"></i><b>10.2</b> Basics</a></li>
<li class="chapter" data-level="10.3" data-path="unix.html"><a href="unix.html#syntax-for-both-macwindows"><i class="fa fa-check"></i><b>10.3</b> Syntax for both Mac/Windows</a></li>
<li class="chapter" data-level="10.4" data-path="unix.html"><a href="unix.html#running-bash-scripts"><i class="fa fa-check"></i><b>10.4</b> Running Bash Scripts</a></li>
<li class="chapter" data-level="10.5" data-path="unix.html"><a href="unix.html#running-rscripts-in-windows"><i class="fa fa-check"></i><b>10.5</b> Running Rscripts in Windows</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="unix.html"><a href="unix.html#common-mistakes"><i class="fa fa-check"></i><b>10.5.1</b> Common Mistakes</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="unix.html"><a href="unix.html#checking-tasks-and-killing-jobs"><i class="fa fa-check"></i><b>10.6</b> Checking tasks and killing jobs</a></li>
<li class="chapter" data-level="10.7" data-path="unix.html"><a href="unix.html#running-big-jobs"><i class="fa fa-check"></i><b>10.7</b> Running big jobs</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html"><i class="fa fa-check"></i><b>11</b> Building Automated Markdown Reports</a>
<ul>
<li class="chapter" data-level="11.1" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#setting-up-the-markdown"><i class="fa fa-check"></i><b>11.1</b> Setting up the markdown</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#yaml"><i class="fa fa-check"></i><b>11.1.1</b> YAML</a></li>
<li class="chapter" data-level="11.1.2" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#directory-structure-1"><i class="fa fa-check"></i><b>11.1.2</b> Directory structure</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#automating-the-data-export-process"><i class="fa fa-check"></i><b>11.2</b> Automating the data export process</a></li>
<li class="chapter" data-level="11.3" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#loading-the-data"><i class="fa fa-check"></i><b>11.3</b> Loading the data</a></li>
<li class="chapter" data-level="11.4" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#data-cleaningprocessing"><i class="fa fa-check"></i><b>11.4</b> Data cleaning/processing</a></li>
<li class="chapter" data-level="11.5" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#data-monitoring"><i class="fa fa-check"></i><b>11.5</b> Data monitoring</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#data-validation"><i class="fa fa-check"></i><b>11.5.1</b> Data validation</a></li>
<li class="chapter" data-level="11.5.2" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#data-presentation-dsmc-style"><i class="fa fa-check"></i><b>11.5.2</b> Data presentation (DSMC-style)</a></li>
<li class="chapter" data-level="11.5.3" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#appendix-if-necessary"><i class="fa fa-check"></i><b>11.5.3</b> Appendix (if necessary)</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#summary"><i class="fa fa-check"></i><b>11.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="commcoord.html"><a href="commcoord.html"><i class="fa fa-check"></i><b>12</b> Communication and Coordination</a>
<ul>
<li class="chapter" data-level="12.1" data-path="commcoord.html"><a href="commcoord.html#slack"><i class="fa fa-check"></i><b>12.1</b> Slack</a></li>
<li class="chapter" data-level="12.2" data-path="commcoord.html"><a href="commcoord.html#email"><i class="fa fa-check"></i><b>12.2</b> Email</a></li>
<li class="chapter" data-level="12.3" data-path="commcoord.html"><a href="commcoord.html#trello"><i class="fa fa-check"></i><b>12.3</b> Trello</a></li>
<li class="chapter" data-level="12.4" data-path="commcoord.html"><a href="commcoord.html#google-drive"><i class="fa fa-check"></i><b>12.4</b> Google Drive</a></li>
<li class="chapter" data-level="12.5" data-path="commcoord.html"><a href="commcoord.html#calendar-meetings"><i class="fa fa-check"></i><b>12.5</b> Calendar / Meetings</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="code-of-conduct.html"><a href="code-of-conduct.html"><i class="fa fa-check"></i><b>13</b> Code of conduct</a>
<ul>
<li class="chapter" data-level="13.1" data-path="code-of-conduct.html"><a href="code-of-conduct.html#group-culture"><i class="fa fa-check"></i><b>13.1</b> Group culture</a></li>
<li class="chapter" data-level="13.2" data-path="code-of-conduct.html"><a href="code-of-conduct.html#protecting-human-subjects"><i class="fa fa-check"></i><b>13.2</b> Protecting human subjects</a></li>
<li class="chapter" data-level="13.3" data-path="code-of-conduct.html"><a href="code-of-conduct.html#authorship"><i class="fa fa-check"></i><b>13.3</b> Authorship</a></li>
<li class="chapter" data-level="13.4" data-path="code-of-conduct.html"><a href="code-of-conduct.html#work-hours"><i class="fa fa-check"></i><b>13.4</b> Work hours</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>14</b> Additional Resources</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Proctor Foundation Data Science Handbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="publicdata" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> Making Data Public<a href="publicdata.html#publicdata" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><em>Contributors: Fanice Nyatigo, Ben Arnold</em></p>
<div id="overview-1" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Overview<a href="publicdata.html#overview-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<hr />
<blockquote>
<p><em><strong>Warning! </strong> <strong>NEVER</strong> push a dataset into the public domain (e.g., GitHub, OSF) without first checking with Ben to ensure that it is appropriately de-identified and we have approval from the sponsor and/or human subjects review board to do so. For example, we will need to re-code participant IDs (even if they contain no identifying information) before making data public to completely break the link between IDs and identifiable information stored on our servers. </em></p>
</blockquote>
<hr />
<p>If you are releasing data into the public domain, then consider making available <em>at minimum</em> a <code>.csv</code> file and a codebook of the same name (note: you should have a codebook for internal data as well). We often also make available <code>.rds</code> files as well. For example, your <code>mystudy/data/public</code> directory could include three files for a single dataset, two with the actual data in <code>.rds</code> and <code>.csv</code> formats, and a third that describes their contents:</p>
<pre><code>analysis_data_public.csv
analysis_data_public.rds
analysis_data_public_codebook.txt</code></pre>
<p>In general, datasets are usually too big to save on GitHub, but occasionally they are small. Here is an example of where we actually pushed the data directly to GitHub: <a href="https://github.com/ben-arnold/enterics-seroepi/tree/master/data" class="uri">https://github.com/ben-arnold/enterics-seroepi/tree/master/data</a> .</p>
<p>If the data are bigger, then maintaining them under version control in your git repository can be unweildy. Instead, we recommend using another stable repository that has version control, such as the Open Science Framework (<a href="https://osf.io">osf.io</a>). For example, all of the data from the WASH Benefits trials (led by investigators at Berkeley, icddr,b, IPA-Kenya and others) are all stored through data components nested within in OSF projects: <a href="https://osf.io/tprw2/" class="uri">https://osf.io/tprw2/</a>. Another good option is Dryad (<a href="https://datadryad.org/">datadryad.org</a>), which normally costs a nominal fee to archive data but is free to investigators in the University of California system.</p>
<p>As of this time, we recommend cross-linking public files in GitHub (scripts/notebooks only), OSF, and Dryad.</p>
<p>Below are the main steps to making data public, after finalizing the analysis datasets and scripts:<br />
1. Remove Protected Health Information (PHI)<br />
2. Create public IDs or join already created public IDs to the data<br />
3. Create an OSF repository and/or Dryad repository<br />
4. Edit analysis scripts to run using the public datasets and test (optional)<br />
5. Create a public github page for analysis scripts and link to OSF and/or Dryad/Zenodo<br />
6. Go live</p>
</div>
<div id="removing-phi" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Removing PHI<a href="publicdata.html#removing-phi" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Once the data is finalized for analysis, the first step is to strip it of Protected Health Information (PHI), or any other data that could be used to link back to specific participants, such as names, birth dates, or GPS coordinates at the village/neighborhood level or below. PHI includes, but is not limited to:</p>
<div id="personal-information" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Personal information<a href="publicdata.html#personal-information" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>These are identifiers that directly point to specific individuals, such as:<br />
- Names, addresses, photographs, date of birth<br />
- A combination of age, sex, and geographic location (below population 20,000) is considered identifiable</p>
</div>
<div id="dates" class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Dates<a href="publicdata.html#dates" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Any specific dates (e.g., study visit dates, birth dates, treatment dates) are usually problematic.<br />
- If a dataset requires high resolution temporal information, coarsen visit or measurement dates to be two variables: year and week of the year (1-52).<br />
- If a dataset requires age, provide that information without a birth date (typically month resolution is sufficient)</p>
<hr />
<blockquote>
<p><em><strong>Caution!</strong> If making changes to the format of dates or ages, make sure your analysis code runs on these modified versions of the data (step 3)! </em></p>
</blockquote>
<hr />
</div>
<div id="geographic-information" class="section level3 hasAnchor" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> Geographic information<a href="publicdata.html#geographic-information" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Do not include GPS coordinates (longitude, latitude) except in special circumstances where they have been obfuscated/shifted. Reach out to your PI and the study’s biostatistician before doing this because it can be complicated.</p>
<p>Do not include place names or codes (e.g., US Zip Codes) if the place contains &lt;20,000 people. For villages or neighborhoods, code them with uninformative IDs. For sub-districts or districts, names are fine.</p>
<p>If an analysis requires GPS locations (e.g., to make a map), then typically we include a disclaimer in the article’s data availability statement that explains we cannot make GPS locations public to protect participant confidentiality. As a middle ground, we typically make our <em>code</em> public that runs on the geo-located data for transparency, even if independent researchers can’t actually run that code (although please be careful to ensure the code itself does not in any way include geographic identifiers).</p>
<p>For more examples of what constitutes PHI, please refer to this link: <a href="https://cphs.berkeley.edu/hipaa/hipaa18.html" class="uri">https://cphs.berkeley.edu/hipaa/hipaa18.html</a></p>
</div>
</div>
<div id="create-public-ids" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Create public IDs<a href="publicdata.html#create-public-ids" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="rationale" class="section level3 hasAnchor" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Rationale<a href="publicdata.html#rationale" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The UCSF IRB requires that public datasets not include the original study IDs to identify participants or other units in the study (such as village IDs). The reason is that those IDs are linked in our private datasets to PHI. By creating a new set of public IDs, the public dataset is one step further removed from the potential to link to PHI.</p>
</div>
<div id="a-single-set-of-public-ids-for-each-study" class="section level3 hasAnchor" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> A single set of public IDs for each study<a href="publicdata.html#a-single-set-of-public-ids-for-each-study" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For each study, it is ideal to create a single set of public IDs whenever possible. We could create a new set of public IDs for every public dataset, but the downside is that independent researchers could no longer link data that might be related. By creating a single set of public IDs associated with each internal study ID, public files retain the link.</p>
<p>Maintaining a single set of public IDs requires a shared “bridge” dataset, that includes a row for each study ID and has the associated public ID. For studies with multiple levels of ID, we would typically have separate bridge datasets for each type of ID (e.g,. cluster ID, participant ID, etc.)</p>
<p>Create a public ID that can be used to uniquely identify participants and that can internally be linked to the original study IDs. We recommend creating a subdirectory in the study’s shared data directory to store the public IDs. The shared location enables multiple projects to use the same IDs. Create the IDs using a script that reads in the study IDs, creates a unique (uninformative) public ID for the study IDs, and then saves the bridge dataset. The script should be saved in the same directory as the public ID files.</p>
<hr />
<blockquote>
<p><em><strong>Caution!</strong> Note that small differences may arise if the new public IDs do not necessarily order participants in the same way as the internal IDs. The small differences are all in estimates that rely on resampling, such as Bootstrap CIs, permutation P-values, and TMLE, as the resampling process may lead tp slightly different re-samples. The key here, to ensure the results are consistent irrespective of the dataset used, is simply to not assign public IDs randomly. Use <code>rank()</code> on the internal ID instead of <code>row_number()</code> to ensure that the order is always the same. </em></p>
</blockquote>
<hr />
</div>
<div id="example-scripts" class="section level3 hasAnchor" number="7.3.3">
<h3><span class="header-section-number">7.3.3</span> Example scripts<a href="publicdata.html#example-scripts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We have created a self-contained and reproducible example that you can run and replicate when making data public for your projects. It contains the following files and folders:</p>
<ol style="list-style-type: decimal">
<li><code>data/final/</code>- folder containing the projects final data in both csv and rds formats<br />
</li>
<li><code>code/DEMO_generate_public_IDs.R</code>- creates randomly generated public IDs that can be matched to the trial’s assigned patient IDs.<br />
</li>
<li><code>data/make_public/DEMO_internal_to_publicID.csv</code>- the output from step #2, a bridge dataset with two variables- the new public ID and the patient’s assigned ID.<br />
</li>
<li><code>code/DEMO_create_public_datasets.R</code>- joins the public IDs to the trial’s full dataset, and strips it of the assigned patient ID.</li>
<li><code>data/public/</code>- folder containing the output from step #3- de-identified public dataset, in csv and rds formats, with uniquely identifying public IDs that cannot be easily linked back to the patient’s ID.</li>
</ol>
<p>The example workflow is accessible via GitHub: <a href="https://github.com/proctor-ucsf/dcc-handbook/tree/master/templates/making-data-public" class="uri">https://github.com/proctor-ucsf/dcc-handbook/tree/master/templates/making-data-public</a></p>
</div>
</div>
<div id="create-a-data-repository" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Create a data repository<a href="publicdata.html#create-a-data-repository" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First, ensure that you create a codebook and metadata file for each public dataset <a href="https://proctor-ucsf.github.io/dcc-handbook/datawrangling.html#documenting-datasets">See the DCC guide on Documenting datasets</a>. Use the same name as the datasets, but with “-codebook.txt” / “-codebook.html” / “-codebook.csv” at the end (depending on the file format for the codebook). One nice option is the R codebook package, which also generates JSON output that is machine-readable.</p>
<div id="steps-for-creating-an-open-science-framework-osf-repository" class="section level3 hasAnchor" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> Steps for creating an Open Science Framework (OSF) repository:<a href="publicdata.html#steps-for-creating-an-open-science-framework-osf-repository" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Create a new OSF project per these instructions: <a href="https://help.osf.io/article/252-create-a-project" class="uri">https://help.osf.io/article/252-create-a-project</a></li>
<li>Create a data component and upload the datasets in .csv and .rds format along with the codebooks. The primary format for public dissemination is .csv but we make the .rds files available too as auxiliary files for convenience.</li>
<li>Create a notebook component and upload the final .html files (which will not be on github… but see optional item below)</li>
<li>On the OSF landing Wiki, provide some context. Here is a recent example: <a href="https://osf.io/954bt/" class="uri">https://osf.io/954bt/</a></li>
<li>Create a Digital Object Identifier (DOI) for the repository. A DOI is a unique identifier that provides a persistent link to content, such as a dataset in this case. <a href="https://researchdata.princeton.edu/research-lifecycle-guide/whats-doi-and-what-should-i-know-about-citing-datasets">Learn more about DOIs</a></li>
<li>Optional: Complete the software checklist and system requirement guide for the analysis to guide others. Include it on the GitHub README for the project: <a href="https://github.com/proctor-ucsf/mordor-antibody" class="uri">https://github.com/proctor-ucsf/mordor-antibody</a></li>
</ol>
</div>
<div id="steps-for-creating-a-dryad-data-repository" class="section level3 hasAnchor" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> Steps for creating a Dryad data repository:<a href="publicdata.html#steps-for-creating-a-dryad-data-repository" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>TBD
<a href="https://datadryad.org/stash/submission_process" class="uri">https://datadryad.org/stash/submission_process</a></p>
</div>
</div>
<div id="edit-and-test-analysis-scripts" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> Edit and test analysis scripts<a href="publicdata.html#edit-and-test-analysis-scripts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Make minor changes to the analysis scripts so that they run on public data. If using version control in GitHub, the most straight-forward way is to create a branch from the main git branch that reads in the public files, and then renames the new public ID variable, e.g., “id_public” to the internally recognized ID variable name, e.g. “recordID”, when reading in the public data. Re-run all the analysis scripts to ensure that they still work with the public version of the dataset.</p>
</div>
<div id="create-a-public-github-page-for-public-scripts" class="section level2 hasAnchor" number="7.6">
<h2><span class="header-section-number">7.6</span> Create a public GitHub page for public scripts<a href="publicdata.html#create-a-public-github-page-for-public-scripts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>At minimum, we should include all of the scripts required to run the analyses .</p>
<p>See examples:<br />
- ACTION - <a href="https://github.com/proctor-ucsf/ACTION-public" class="uri">https://github.com/proctor-ucsf/ACTION-public</a><br />
- NAITRE - <a href="https://github.com/proctor-ucsf/NAITRE-primary" class="uri">https://github.com/proctor-ucsf/NAITRE-primary</a></p>
<hr />
<blockquote>
<p><em><strong>Caution!</strong> Read through the scripts carefully to ensure there is no PHI in the code itself </em></p>
</blockquote>
<hr />
<p>Once a public GitHub page exists, you can create a new component on an OSF project (step 3, above) and link it to the public version of the GitHub repo.</p>
</div>
<div id="go-live" class="section level2 hasAnchor" number="7.7">
<h2><span class="header-section-number">7.7</span> Go live<a href="publicdata.html#go-live" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>On GitHub, it is useful to create an official “release” version to freeze the repository, where you can have “associated files” with each version. Include the .html notebook output as additional files — since they aren’t tracked in GitHub, it does provide a way of freezing / saving the HTML output for us and others. OSF examples of a few Proctor trials:<br />
- ACTION - <a href="https://osf.io/ca3pe/" class="uri">https://osf.io/ca3pe/</a><br />
- NAITRE - <a href="https://osf.io/ujeyb/" class="uri">https://osf.io/ujeyb/</a><br />
- MORDOR Niger antibody study - <a href="https://osf.io/dgsq3/" class="uri">https://osf.io/dgsq3/</a></p>
<p>Further reading on end-to-end data management: <a href="https://plos.org/resource/how-to-store-and-manage-your-data/#data-management-plan">How to Store and Manage Your Data - PLOS</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="datawrangling.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="bigdata.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["dcc-handbook.pdf", "dcc-handbook.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
