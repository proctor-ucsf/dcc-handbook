<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 11 Building Automated Markdown Reports | Proctor Foundation Data Science Handbook</title>
  <meta name="description" content="This is a handbook to help summarize best practices in data science among team members at the Francis I. Proctor Foundation." />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 11 Building Automated Markdown Reports | Proctor Foundation Data Science Handbook" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a handbook to help summarize best practices in data science among team members at the Francis I. Proctor Foundation." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 11 Building Automated Markdown Reports | Proctor Foundation Data Science Handbook" />
  
  <meta name="twitter:description" content="This is a handbook to help summarize best practices in data science among team members at the Francis I. Proctor Foundation." />
  

<meta name="author" content="Contributors: Ben Arnold, Jade Benjamin-Chung, Kunal Mishra, Anna Nguyen, Nolan Pokpongkiat, Stephanie Djajadi, Eric Kim, Will Godwin, Fanice Nyatigo (many from UC Berkeley in addition to Proctor)" />


<meta name="date" content="2024-05-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="unix.html"/>
<link rel="next" href="commcoord.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Proctor Data Science Handbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction: Work Flow and Reproducible Analyses</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#workflow"><i class="fa fa-check"></i><b>1.1</b> Workflow</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#reproducibility"><i class="fa fa-check"></i><b>1.2</b> Reproducibility</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#automation"><i class="fa fa-check"></i><b>1.3</b> Automation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="workflows.html"><a href="workflows.html"><i class="fa fa-check"></i><b>2</b> Workflows</a></li>
<li class="chapter" data-level="3" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html"><i class="fa fa-check"></i><b>3</b> Directory Structure and Code Repositories</a>
<ul>
<li class="chapter" data-level="3.1" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#small-and-large-projects"><i class="fa fa-check"></i><b>3.1</b> Small and large projects</a></li>
<li class="chapter" data-level="3.2" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#directory-structure"><i class="fa fa-check"></i><b>3.2</b> Directory Structure</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#first-level-data-and-analyses"><i class="fa fa-check"></i><b>3.2.1</b> First level: data and analyses</a></li>
<li class="chapter" data-level="3.2.2" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#second-level-data"><i class="fa fa-check"></i><b>3.2.2</b> Second level: data</a></li>
<li class="chapter" data-level="3.2.3" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#second-level-projects"><i class="fa fa-check"></i><b>3.2.3</b> Second level: projects</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#code-repositories"><i class="fa fa-check"></i><b>3.3</b> Code Repositories</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#rproj-files"><i class="fa fa-check"></i><b>3.3.1</b> <code>.Rproj</code> files</a></li>
<li class="chapter" data-level="3.3.2" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#configuration-config-file"><i class="fa fa-check"></i><b>3.3.2</b> Configuration (‘config’) File</a></li>
<li class="chapter" data-level="3.3.3" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#shared-functions-file"><i class="fa fa-check"></i><b>3.3.3</b> Shared Functions File</a></li>
<li class="chapter" data-level="3.3.4" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#order-files-and-subdirectories"><i class="fa fa-check"></i><b>3.3.4</b> Order Files and Subdirectories</a></li>
<li class="chapter" data-level="3.3.5" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#use-bash-scripts-or-r-scripts-to-ensure-reproducibility"><i class="fa fa-check"></i><b>3.3.5</b> Use Bash scripts or R scripts to ensure reproducibility</a></li>
<li class="chapter" data-level="3.3.6" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#alternative-approach-for-code-repos"><i class="fa fa-check"></i><b>3.3.6</b> Alternative approach for code repos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="codingpractices.html"><a href="codingpractices.html"><i class="fa fa-check"></i><b>4</b> Coding Practices</a>
<ul>
<li class="chapter" data-level="4.1" data-path="codingpractices.html"><a href="codingpractices.html#organizing-scripts"><i class="fa fa-check"></i><b>4.1</b> Organizing scripts</a></li>
<li class="chapter" data-level="4.2" data-path="codingpractices.html"><a href="codingpractices.html#documenting-your-code"><i class="fa fa-check"></i><b>4.2</b> Documenting your code</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="codingpractices.html"><a href="codingpractices.html#file-headers"><i class="fa fa-check"></i><b>4.2.1</b> File headers</a></li>
<li class="chapter" data-level="4.2.2" data-path="codingpractices.html"><a href="codingpractices.html#comments-in-the-body-of-your-script"><i class="fa fa-check"></i><b>4.2.2</b> Comments in the body of your script</a></li>
<li class="chapter" data-level="4.2.3" data-path="codingpractices.html"><a href="codingpractices.html#function-documentation"><i class="fa fa-check"></i><b>4.2.3</b> Function documentation</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="codingpractices.html"><a href="codingpractices.html#object-naming"><i class="fa fa-check"></i><b>4.3</b> Object naming</a></li>
<li class="chapter" data-level="4.4" data-path="codingpractices.html"><a href="codingpractices.html#function-calls"><i class="fa fa-check"></i><b>4.4</b> Function calls</a></li>
<li class="chapter" data-level="4.5" data-path="codingpractices.html"><a href="codingpractices.html#the-here-package"><i class="fa fa-check"></i><b>4.5</b> The <code>here</code> package</a></li>
<li class="chapter" data-level="4.6" data-path="codingpractices.html"><a href="codingpractices.html#tidyverse"><i class="fa fa-check"></i><b>4.6</b> Tidyverse</a></li>
<li class="chapter" data-level="4.7" data-path="codingpractices.html"><a href="codingpractices.html#coding-with-r-and-python"><i class="fa fa-check"></i><b>4.7</b> Coding with R and Python</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="codingstyle.html"><a href="codingstyle.html"><i class="fa fa-check"></i><b>5</b> Coding Style</a>
<ul>
<li class="chapter" data-level="5.1" data-path="codingstyle.html"><a href="codingstyle.html#line-breaks"><i class="fa fa-check"></i><b>5.1</b> Line breaks</a></li>
<li class="chapter" data-level="5.2" data-path="codingstyle.html"><a href="codingstyle.html#automated-tools-for-style-and-project-workflow"><i class="fa fa-check"></i><b>5.2</b> Automated Tools for Style and Project Workflow</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="codingstyle.html"><a href="codingstyle.html#styling"><i class="fa fa-check"></i><b>5.2.1</b> Styling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="datawrangling.html"><a href="datawrangling.html"><i class="fa fa-check"></i><b>6</b> Data Wrangling</a>
<ul>
<li class="chapter" data-level="6.1" data-path="datawrangling.html"><a href="datawrangling.html#overview"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="datawrangling.html"><a href="datawrangling.html#cardinal-rule"><i class="fa fa-check"></i><b>6.2</b> Cardinal rule</a></li>
<li class="chapter" data-level="6.3" data-path="datawrangling.html"><a href="datawrangling.html#data-inputoutput-io"><i class="fa fa-check"></i><b>6.3</b> Data input/output (I/O)</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="datawrangling.html"><a href="datawrangling.html#excel-files"><i class="fa fa-check"></i><b>6.3.1</b> Excel files</a></li>
<li class="chapter" data-level="6.3.2" data-path="datawrangling.html"><a href="datawrangling.html#rds-vs-.rdata-files"><i class="fa fa-check"></i><b>6.3.2</b> <code>.RDS</code> vs <code>.RData</code> Files</a></li>
<li class="chapter" data-level="6.3.3" data-path="datawrangling.html"><a href="datawrangling.html#csv-files"><i class="fa fa-check"></i><b>6.3.3</b> <code>.CSV</code> Files</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="datawrangling.html"><a href="datawrangling.html#documenting-datasets"><i class="fa fa-check"></i><b>6.4</b> Documenting datasets</a></li>
<li class="chapter" data-level="6.5" data-path="datawrangling.html"><a href="datawrangling.html#mapping-data-from-untouched---final"><i class="fa fa-check"></i><b>6.5</b> Mapping data from untouched -&gt; final</a></li>
<li class="chapter" data-level="6.6" data-path="datawrangling.html"><a href="datawrangling.html#relational-data"><i class="fa fa-check"></i><b>6.6</b> Relational data</a></li>
<li class="chapter" data-level="6.7" data-path="datawrangling.html"><a href="datawrangling.html#be-careful-with-joins-merges"><i class="fa fa-check"></i><b>6.7</b> Be careful with joins / merges</a></li>
<li class="chapter" data-level="6.8" data-path="datawrangling.html"><a href="datawrangling.html#reshaping-data"><i class="fa fa-check"></i><b>6.8</b> Reshaping data</a></li>
<li class="chapter" data-level="6.9" data-path="datawrangling.html"><a href="datawrangling.html#data-cleaning"><i class="fa fa-check"></i><b>6.9</b> Data cleaning</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="publicdata.html"><a href="publicdata.html"><i class="fa fa-check"></i><b>7</b> Making Data Public</a>
<ul>
<li class="chapter" data-level="7.1" data-path="publicdata.html"><a href="publicdata.html#overview-1"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="publicdata.html"><a href="publicdata.html#removing-phi"><i class="fa fa-check"></i><b>7.2</b> Removing PHI</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="publicdata.html"><a href="publicdata.html#personal-information"><i class="fa fa-check"></i><b>7.2.1</b> Personal information</a></li>
<li class="chapter" data-level="7.2.2" data-path="publicdata.html"><a href="publicdata.html#dates"><i class="fa fa-check"></i><b>7.2.2</b> Dates</a></li>
<li class="chapter" data-level="7.2.3" data-path="publicdata.html"><a href="publicdata.html#geographic-information"><i class="fa fa-check"></i><b>7.2.3</b> Geographic information</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="publicdata.html"><a href="publicdata.html#create-public-ids"><i class="fa fa-check"></i><b>7.3</b> Create public IDs</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="publicdata.html"><a href="publicdata.html#rationale"><i class="fa fa-check"></i><b>7.3.1</b> Rationale</a></li>
<li class="chapter" data-level="7.3.2" data-path="publicdata.html"><a href="publicdata.html#a-single-set-of-public-ids-for-each-study"><i class="fa fa-check"></i><b>7.3.2</b> A single set of public IDs for each study</a></li>
<li class="chapter" data-level="7.3.3" data-path="publicdata.html"><a href="publicdata.html#example-scripts"><i class="fa fa-check"></i><b>7.3.3</b> Example scripts</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="publicdata.html"><a href="publicdata.html#create-a-data-repository"><i class="fa fa-check"></i><b>7.4</b> Create a data repository</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="publicdata.html"><a href="publicdata.html#steps-for-creating-an-open-science-framework-osf-repository"><i class="fa fa-check"></i><b>7.4.1</b> Steps for creating an Open Science Framework (OSF) repository:</a></li>
<li class="chapter" data-level="7.4.2" data-path="publicdata.html"><a href="publicdata.html#steps-for-creating-a-dryad-data-repository"><i class="fa fa-check"></i><b>7.4.2</b> Steps for creating a Dryad data repository:</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="publicdata.html"><a href="publicdata.html#edit-and-test-analysis-scripts"><i class="fa fa-check"></i><b>7.5</b> Edit and test analysis scripts</a></li>
<li class="chapter" data-level="7.6" data-path="publicdata.html"><a href="publicdata.html#create-a-public-github-page-for-public-scripts"><i class="fa fa-check"></i><b>7.6</b> Create a public GitHub page for public scripts</a></li>
<li class="chapter" data-level="7.7" data-path="publicdata.html"><a href="publicdata.html#go-live"><i class="fa fa-check"></i><b>7.7</b> Go live</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="bigdata.html"><a href="bigdata.html"><i class="fa fa-check"></i><b>8</b> Working with Big Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="bigdata.html"><a href="bigdata.html#basics"><i class="fa fa-check"></i><b>8.1</b> Basics</a></li>
<li class="chapter" data-level="8.2" data-path="bigdata.html"><a href="bigdata.html#using-downsampled-data"><i class="fa fa-check"></i><b>8.2</b> Using downsampled data</a></li>
<li class="chapter" data-level="8.3" data-path="bigdata.html"><a href="bigdata.html#big-data-unix"><i class="fa fa-check"></i><b>8.3</b> Unix</a></li>
<li class="chapter" data-level="8.4" data-path="bigdata.html"><a href="bigdata.html#sql-and-dbplyr"><i class="fa fa-check"></i><b>8.4</b> SQL and <code>dbplyr</code></a></li>
<li class="chapter" data-level="8.5" data-path="bigdata.html"><a href="bigdata.html#data.table-and-dtplyr"><i class="fa fa-check"></i><b>8.5</b> <code>data.table</code> and <code>dtplyr</code></a></li>
<li class="chapter" data-level="8.6" data-path="bigdata.html"><a href="bigdata.html#ff-bigmemory-biglm"><i class="fa fa-check"></i><b>8.6</b> <code>ff</code>, <code>bigmemory</code>, <code>biglm</code></a></li>
<li class="chapter" data-level="8.7" data-path="bigdata.html"><a href="bigdata.html#parallel-computing"><i class="fa fa-check"></i><b>8.7</b> Parallel computing</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="bigdata.html"><a href="bigdata.html#embarrassingly-parallel-problems"><i class="fa fa-check"></i><b>8.7.1</b> Embarrassingly Parallel Problems</a></li>
<li class="chapter" data-level="8.7.2" data-path="bigdata.html"><a href="bigdata.html#packages"><i class="fa fa-check"></i><b>8.7.2</b> Packages</a></li>
<li class="chapter" data-level="8.7.3" data-path="bigdata.html"><a href="bigdata.html#gpus"><i class="fa fa-check"></i><b>8.7.3</b> GPU’s</a></li>
<li class="chapter" data-level="8.7.4" data-path="bigdata.html"><a href="bigdata.html#the-mapreduce-paradigm"><i class="fa fa-check"></i><b>8.7.4</b> The <em>MapReduce</em> paradigm</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="bigdata.html"><a href="bigdata.html#optimal-rstudio-set-up"><i class="fa fa-check"></i><b>8.8</b> Optimal RStudio set up</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>9</b> GitHub and Version Control</a>
<ul>
<li class="chapter" data-level="9.1" data-path="github.html"><a href="github.html#basics-1"><i class="fa fa-check"></i><b>9.1</b> Basics</a></li>
<li class="chapter" data-level="9.2" data-path="github.html"><a href="github.html#git-branching"><i class="fa fa-check"></i><b>9.2</b> Git Branching</a></li>
<li class="chapter" data-level="9.3" data-path="github.html"><a href="github.html#example-workflow"><i class="fa fa-check"></i><b>9.3</b> Example Workflow</a></li>
<li class="chapter" data-level="9.4" data-path="github.html"><a href="github.html#commonly-used-git-commands"><i class="fa fa-check"></i><b>9.4</b> Commonly Used Git Commands</a></li>
<li class="chapter" data-level="9.5" data-path="github.html"><a href="github.html#how-often-should-i-commit"><i class="fa fa-check"></i><b>9.5</b> How often should I commit?</a></li>
<li class="chapter" data-level="9.6" data-path="github.html"><a href="github.html#what-should-be-pushed-to-github"><i class="fa fa-check"></i><b>9.6</b> What should be pushed to Github?</a></li>
<li class="chapter" data-level="9.7" data-path="github.html"><a href="github.html#how-should-i-describe-my-commit"><i class="fa fa-check"></i><b>9.7</b> How should I describe my commit?</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="unix.html"><a href="unix.html"><i class="fa fa-check"></i><b>10</b> UNIX Commands</a>
<ul>
<li class="chapter" data-level="10.1" data-path="unix.html"><a href="unix.html#environment"><i class="fa fa-check"></i><b>10.1</b> Environment</a></li>
<li class="chapter" data-level="10.2" data-path="unix.html"><a href="unix.html#basics-2"><i class="fa fa-check"></i><b>10.2</b> Basics</a></li>
<li class="chapter" data-level="10.3" data-path="unix.html"><a href="unix.html#syntax-for-both-macwindows"><i class="fa fa-check"></i><b>10.3</b> Syntax for both Mac/Windows</a></li>
<li class="chapter" data-level="10.4" data-path="unix.html"><a href="unix.html#running-bash-scripts"><i class="fa fa-check"></i><b>10.4</b> Running Bash Scripts</a></li>
<li class="chapter" data-level="10.5" data-path="unix.html"><a href="unix.html#running-rscripts-in-windows"><i class="fa fa-check"></i><b>10.5</b> Running Rscripts in Windows</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="unix.html"><a href="unix.html#common-mistakes"><i class="fa fa-check"></i><b>10.5.1</b> Common Mistakes</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="unix.html"><a href="unix.html#checking-tasks-and-killing-jobs"><i class="fa fa-check"></i><b>10.6</b> Checking tasks and killing jobs</a></li>
<li class="chapter" data-level="10.7" data-path="unix.html"><a href="unix.html#running-big-jobs"><i class="fa fa-check"></i><b>10.7</b> Running big jobs</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html"><i class="fa fa-check"></i><b>11</b> Building Automated Markdown Reports</a>
<ul>
<li class="chapter" data-level="11.1" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#setting-up-the-markdown"><i class="fa fa-check"></i><b>11.1</b> Setting up the markdown</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#yaml"><i class="fa fa-check"></i><b>11.1.1</b> YAML</a></li>
<li class="chapter" data-level="11.1.2" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#directory-structure-1"><i class="fa fa-check"></i><b>11.1.2</b> Directory structure</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#automating-the-data-export-process"><i class="fa fa-check"></i><b>11.2</b> Automating the data export process</a></li>
<li class="chapter" data-level="11.3" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#loading-the-data"><i class="fa fa-check"></i><b>11.3</b> Loading the data</a></li>
<li class="chapter" data-level="11.4" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#data-cleaningprocessing"><i class="fa fa-check"></i><b>11.4</b> Data cleaning/processing</a></li>
<li class="chapter" data-level="11.5" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#data-monitoring"><i class="fa fa-check"></i><b>11.5</b> Data monitoring</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#data-validation"><i class="fa fa-check"></i><b>11.5.1</b> Data validation</a></li>
<li class="chapter" data-level="11.5.2" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#data-presentation-dsmc-style"><i class="fa fa-check"></i><b>11.5.2</b> Data presentation (DSMC-style)</a></li>
<li class="chapter" data-level="11.5.3" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#appendix-if-necessary"><i class="fa fa-check"></i><b>11.5.3</b> Appendix (if necessary)</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#summary"><i class="fa fa-check"></i><b>11.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="commcoord.html"><a href="commcoord.html"><i class="fa fa-check"></i><b>12</b> Communication and Coordination</a>
<ul>
<li class="chapter" data-level="12.1" data-path="commcoord.html"><a href="commcoord.html#slack"><i class="fa fa-check"></i><b>12.1</b> Slack</a></li>
<li class="chapter" data-level="12.2" data-path="commcoord.html"><a href="commcoord.html#email"><i class="fa fa-check"></i><b>12.2</b> Email</a></li>
<li class="chapter" data-level="12.3" data-path="commcoord.html"><a href="commcoord.html#trello"><i class="fa fa-check"></i><b>12.3</b> Trello</a></li>
<li class="chapter" data-level="12.4" data-path="commcoord.html"><a href="commcoord.html#google-drive"><i class="fa fa-check"></i><b>12.4</b> Google Drive</a></li>
<li class="chapter" data-level="12.5" data-path="commcoord.html"><a href="commcoord.html#calendar-meetings"><i class="fa fa-check"></i><b>12.5</b> Calendar / Meetings</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="code-of-conduct.html"><a href="code-of-conduct.html"><i class="fa fa-check"></i><b>13</b> Code of conduct</a>
<ul>
<li class="chapter" data-level="13.1" data-path="code-of-conduct.html"><a href="code-of-conduct.html#group-culture"><i class="fa fa-check"></i><b>13.1</b> Group culture</a></li>
<li class="chapter" data-level="13.2" data-path="code-of-conduct.html"><a href="code-of-conduct.html#protecting-human-subjects"><i class="fa fa-check"></i><b>13.2</b> Protecting human subjects</a></li>
<li class="chapter" data-level="13.3" data-path="code-of-conduct.html"><a href="code-of-conduct.html#authorship"><i class="fa fa-check"></i><b>13.3</b> Authorship</a></li>
<li class="chapter" data-level="13.4" data-path="code-of-conduct.html"><a href="code-of-conduct.html#work-hours"><i class="fa fa-check"></i><b>13.4</b> Work hours</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>14</b> Additional Resources</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Proctor Foundation Data Science Handbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="building-automated-markdown-reports" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">Chapter 11</span> Building Automated Markdown Reports<a href="building-automated-markdown-reports.html#building-automated-markdown-reports" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>“Never forget Murphy’s Law 2.0: Anything that can’t go wrong, will go wrong.” -T. Porco</p>
<p><em>Contributors: Will Godwin, Ying Lin, Ben Arnold</em></p>
<p>Many teams at Proctor conduct trials that utilize electronic data collection, with data flowing in daily. In order to identify potential errors in the field, we have found it very valuable to download, process, and visualize the data on a weekly and daily basis. On numerous occassions, Thanks to monitoring reports, we have been able to identify and rectify impossibly tall 3-month olds or a toddler with different birthdates on separate interviews. Proactively identifying preventable error saves hassle when processing the final data and ultimately makes trials more accurate and efficient. We visualize the data using reports of tables and figures generated in R markdown. This document provides a template for building your own R markdown report, whether for DSMC meeting or internal use. I’ve also included an <a href="templates/example_report.Rmd">example script</a> to show how a report can look in practice.</p>
<p><span class="math inline">\(~\)</span></p>
<div id="setting-up-the-markdown" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">11.1</span> Setting up the markdown<a href="building-automated-markdown-reports.html#setting-up-the-markdown" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="yaml" class="section level3 hasAnchor" number="11.1.1">
<h3><span class="header-section-number">11.1.1</span> YAML<a href="building-automated-markdown-reports.html#yaml" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The YAML is the opening header to most R markdown documents and allows the user to specify parameters regarding the layout and output of the document. Among other things, here is where you can add a table of contents, a subtitle, or specify the default output to be pdf file. For a monitoring report, the YAML might look as follows:</p>
<pre><code>---
title: &quot;EXAMPLE Weekly Report&quot;
subtitle:
- &lt;h1&gt;&lt;u&gt;CONFIDENTIAL-DO NOT DISSEMINATE&lt;/u&gt;&lt;/h1&gt;
author: &quot;Will Godwin&quot;
date: &quot;08 May 2024&quot;
output:
  pdf_document:
    toc: true
    toc_depth: 2
---</code></pre>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="directory-structure-1" class="section level3 hasAnchor" number="11.1.2">
<h3><span class="header-section-number">11.1.2</span> Directory structure<a href="building-automated-markdown-reports.html#directory-structure-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Your report may begin as a couple files in a folder but as it grows in size and complexity, I highly recommend systematizing and standardizing the process for posterity and your own sanity. Refer to <a href="directory-structure-and-code-repositories.html">chapter 3</a> for guidance on building a standardized directory structure and <a href="codingpractices.html">chapter 4</a> for information on coding practices and utilizing the <em>here</em> package, which I use throughout the process.</p>
<p><span class="math inline">\(~\)</span></p>
</div>
</div>
<div id="automating-the-data-export-process" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">11.2</span> Automating the data export process<a href="building-automated-markdown-reports.html#automating-the-data-export-process" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Creating a system that enables you to run some code and download new data in a systematic manner, as opposed to manually downloading the data, is critical to saving time and headaches down the road. This is especially important if you’re building a report that will be run weekly or daily. It may require a little more work on the front end but programmatically downloading data rather than manually will likely be faster, better documented, and standardized. If you work on a team that uses the World Bank’s <em>Survey Solutions</em> for data collection and storage, there is a great API tool that allows you to export data directly from the project’s server. Example code for that process can be found <a href="templates/api_example.R">here</a>. Salesforce, REDCap, and other electronic data capture systems likely have a similar functionality that other Proctor researchers may be more familiar with.</p>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="loading-the-data" class="section level2 hasAnchor" number="11.3">
<h2><span class="header-section-number">11.3</span> Loading the data<a href="building-automated-markdown-reports.html#loading-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Depending on the nature of the trial, there may be multiple files to load after exporting the data. I would suggest using a table (ie simple .csv file) to track all necessary files for the report, as shown below. Refer to the <a href="templates/read_clean_data_example.R">example script</a> for how this looks in a setting that utilizes <em>Survey Solutions</em>.</p>
<center>
<img src="images/report-images/api_meta.png" width="60%" height="40%" />
</center>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="data-cleaningprocessing" class="section level2 hasAnchor" number="11.4">
<h2><span class="header-section-number">11.4</span> Data cleaning/processing<a href="building-automated-markdown-reports.html#data-cleaningprocessing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>I won’t focus explicitly on data cleaning and processing since this process is usually fairly project specific. Briefly, after reading data into R, spend some time making sure all relevant variables (columns) were loaded and checking that variable classes are encoded as expected. Below is an example that checks the structure of the data and converts all variables that should be “Date” class to be so.</p>
<pre><code>#convert all variables with &quot;date&quot; within the name to date class
dt.anthro %&lt;&gt;% mutate_at(vars(matches(&quot;date&quot;)), as.Date)

#convert all values within &quot;childID&quot; variable to lowercase
dt.anthro %&lt;&gt;% mutate_at(vars(matches(&quot;childID&quot;)), tolower)</code></pre>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="data-monitoring" class="section level2 hasAnchor" number="11.5">
<h2><span class="header-section-number">11.5</span> Data monitoring<a href="building-automated-markdown-reports.html#data-monitoring" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now that we have data read into R and structured appropriately, we can focus on the (2) primary aims of the report: data validation to be used internally and DSMC-style presentation of the data. Of course the aims of your report may vary but the monitoring examples below represent evaluations critical to almost any RCT.</p>
<div id="data-validation" class="section level3 hasAnchor" number="11.5.1">
<h3><span class="header-section-number">11.5.1</span> Data validation<a href="building-automated-markdown-reports.html#data-validation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="missinginappropriately-structured-data" class="section level4 hasAnchor" number="11.5.1.1">
<h4><span class="header-section-number">11.5.1.1</span> Missing/inappropriately structured data<a href="building-automated-markdown-reports.html#missinginappropriately-structured-data" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>While not the most glamorous component of the report, checking for missing data is critical. It’s helpful once all the data have been read in, to conduct some important checks of the data integrity. Did R (or python, etc) correctly interpret and load the data files? Are there any participant IDs missing? Are there participant’s with reported birthdates in the future? This is an important stage to think about the plethora of maladies that could befall the data in between when it was recorded and when it got to you. Below are examples of how you could check for some common issues.</p>
<pre><code>#check for missing values across all columns
map(dt.anthro, ~sum(is.na(.)))

#check for missing values in childsex
na_childSex &lt;- sum(is.na(dt.anthro$childSex))

There are 4 rows with missing values for child sex.</code></pre>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="reporting-inconsistencies" class="section level4 hasAnchor" number="11.5.1.2">
<h4><span class="header-section-number">11.5.1.2</span> Reporting inconsistencies<a href="building-automated-markdown-reports.html#reporting-inconsistencies" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Many studies may use multiple independent questionnaires to gather information at different timepoints and ask the same demographic information. For example, in an individually randomized trial, each participant receives an ID that links the participant responses across all timepoints of the study. Below is an example showing how to check that the responses are consistent across all questionnaires.</p>
<pre><code>#join anthro and swabs data by childID to check where childSex is different
dt.anthro %&gt;%
  select(childSex, childID) %&gt;%
  inner_join(
    dt.swabs %&gt;% select(childSex, childID),
    by=&quot;childID&quot;
  ) %&gt;%
  filter(childSex.x!=childSex.y)</code></pre>
<p>Another component of data validation is checking for overt errors and outliers, many of which can often be fixed in the field. One example is when interviewers may accidentally record a study participant’s weight in kilograms instead of grams, resulting in an error 3 magnitudes in size. This error is easily identified (red circle) from plotting the distribution of the birthweights in a histogram.</p>
<pre><code>#age histogram
dt.anthro %&gt;%
  mutate(weeks = difftime(startTime, date_of_birth, units = &quot;weeks&quot;)) %&gt;%
  ggplot(dt.anthro, aes(weeks)) +
    geom_histogram(binwidth = .2) +
    theme_bw() +
    xlab(&quot;Age (weeks)&quot;) +
    ylab(&quot;Count&quot;)</code></pre>
<center>
<p><img src="images/report-images/birthweight.png" width="60%" height="40%" /></p>
Distribution of participant birthweights in grams
</center>
<p><span class="math inline">\(~\)</span></p>
</div>
</div>
<div id="data-presentation-dsmc-style" class="section level3 hasAnchor" number="11.5.2">
<h3><span class="header-section-number">11.5.2</span> Data presentation (DSMC-style)<a href="building-automated-markdown-reports.html#data-presentation-dsmc-style" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The ultimate arbiter of whether a trial remains running is often the Data and Safety Monitoring Committee (DSMC) and these reports can be used to present preliminary findings/analyses as well as detail all relevant safety metrics.</p>
<div id="enrollment" class="section level4 hasAnchor" number="11.5.2.1">
<h4><span class="header-section-number">11.5.2.1</span> Enrollment<a href="building-automated-markdown-reports.html#enrollment" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Any study investigator cares a lot about enrollment, since it determines the length and cost of the trial, among other things. Therefore, any report needs tables/figures showing enrollment trends and trajectory. Below are a couple examples of what they can look like.
<!-- ![](images/report-images/enrollment1.png) --></p>
<center>
<p><img src="images/report-images/enrollment1.png" width="50%" height="30%" /></p>
<p><img src="images/report-images/enrollment2.png" width="70%" height="50%" /></p>
Enrollment counts across the length of the study period.
</center>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="baseline-characteristics" class="section level4 hasAnchor" number="11.5.2.2">
<h4><span class="header-section-number">11.5.2.2</span> Baseline characteristics<a href="building-automated-markdown-reports.html#baseline-characteristics" class="anchor-section" aria-label="Anchor link to header"></a></h4>
Demographic characteristics of the enrolled participants at baseline are often necessary.
<center>
<img src="images/report-images/baseline.png" width="60%" height="40%" />
</center>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="treatment" class="section level4 hasAnchor" number="11.5.2.3">
<h4><span class="header-section-number">11.5.2.3</span> Treatment<a href="building-automated-markdown-reports.html#treatment" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There is usually a treatment component to an RCT, where participants are treated according to their assigned arm (i.e. treatment or placebo). The report should include checks that confirm particpants actually received the treatment that they were randomized to. Otherwise, the results of the study lack interpretability and are likely null.</p>
<pre><code>#merge with treatment letters
wrong_random &lt;- dt.treatment %&gt;%
  left_join(dt_letters, by=&quot;childID&quot;) %&gt;%
  #the treatment letter does not match what&#39;s in database
  tally(TL != assignment) %&gt;% as.numeric()

Number of IDs where treatment letter given does not match database: 0</code></pre>
<center>
<p><img src="images/report-images/treatment.png" width="40%" height="20%" /></p>
Counts of number treated and number eligible, along with percent treated (coverage), by region.
</center>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="primarysecondary-outcomes-masked" class="section level4 hasAnchor" number="11.5.2.4">
<h4><span class="header-section-number">11.5.2.4</span> Primary/secondary outcomes (<strong><em>masked!</em></strong>)<a href="building-automated-markdown-reports.html#primarysecondary-outcomes-masked" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This is probably the most exciting section for an investigator to see since these metrics are the motivation of the trial itself. Be especially vigilient to make sure that the figures remain masked when sending to trial investigators and coordinators. This means making sure that you send no information regarding the treatment assignments while the trial is still active.</p>
<center>
<p><img src="images/report-images/primary_outcome.png" width="50%" height="35%" /></p>
<p>Preliminary mortality rate and total person-years by region.</p>
<p><span class="math inline">\(~\)</span></p>
<p><img src="images/report-images/growth_curves.png" width="50%" height="40%" /></p>
Height growth curves of participants at Baseline and 6-month timepoints.
</center>
<p><span class="math inline">\(~\)</span></p>
</div>
<div id="follow-upadverse-events" class="section level4 hasAnchor" number="11.5.2.5">
<h4><span class="header-section-number">11.5.2.5</span> Follow-up/Adverse events<a href="building-automated-markdown-reports.html#follow-upadverse-events" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>This report can serve as guard against loss to follow-up, an issue that plagues many trials. By actively monitoring the number of participants that have, and have not, been followed-up on, we can communicate where participants or clusters need to more attention to workers in the field. Below is an example showing follow-up percentages by region.</p>
<center>
<img src="images/report-images/followup.png" width="50%" height="35%" />
</center>
<p>As mentioned above, adverse events should be tabulated and closely watched throughout the study to monitor if the intervention may be causing increased harm.</p>
<center>
<img src="images/report-images/adverse_events.png" width="65%" height="45%" />
</center>
<p><span class="math inline">\(~\)</span></p>
</div>
</div>
<div id="appendix-if-necessary" class="section level3 hasAnchor" number="11.5.3">
<h3><span class="header-section-number">11.5.3</span> Appendix (if necessary)<a href="building-automated-markdown-reports.html#appendix-if-necessary" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes an appendix can be helpful to display long lists or addendums to tables shown earlier in the report. Below is an example of a list enumerating all adverse events that were not included in the AE table within the main report.</p>
<center>
<img src="images/report-images/appendix.png" width="70%" height="50%" />
</center>
<p><span class="math inline">\(~\)</span></p>
</div>
</div>
<div id="summary" class="section level2 hasAnchor" number="11.6">
<h2><span class="header-section-number">11.6</span> Summary<a href="building-automated-markdown-reports.html#summary" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This chapter described and illustrated an example of a data monitoring report using R markdown. This is, by no means, an exhaustive list of what to include in a monitoring report but meant to serve as a template as you create your own report. It is specifically geared towards continuous monitoring of randomized-controlled trials but the overarching concepts apply to other types of trials or even retrospective analyses.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="unix.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="commcoord.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["dcc-handbook.pdf", "dcc-handbook.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
