<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Directory Structure and Code Repositories | Proctor Foundation Data Science Handbook</title>
  <meta name="description" content="This is a handbook to help summarize best practices in data science among team members at the Francis I. Proctor Foundation." />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Directory Structure and Code Repositories | Proctor Foundation Data Science Handbook" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a handbook to help summarize best practices in data science among team members at the Francis I. Proctor Foundation." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Directory Structure and Code Repositories | Proctor Foundation Data Science Handbook" />
  
  <meta name="twitter:description" content="This is a handbook to help summarize best practices in data science among team members at the Francis I. Proctor Foundation." />
  

<meta name="author" content="Contributors: Ben Arnold, Jade Benjamin-Chung, Kunal Mishra, Anna Nguyen, Nolan Pokpongkiat, Stephanie Djajadi, Eric Kim, Will Godwin, Fanice Nyatigo (many from UC Berkeley in addition to Proctor)" />


<meta name="date" content="2024-05-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="workflows.html"/>
<link rel="next" href="codingpractices.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>



<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Proctor Data Science Handbook</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction: Work Flow and Reproducible Analyses</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#workflow"><i class="fa fa-check"></i><b>1.1</b> Workflow</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#reproducibility"><i class="fa fa-check"></i><b>1.2</b> Reproducibility</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#automation"><i class="fa fa-check"></i><b>1.3</b> Automation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="workflows.html"><a href="workflows.html"><i class="fa fa-check"></i><b>2</b> Workflows</a></li>
<li class="chapter" data-level="3" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html"><i class="fa fa-check"></i><b>3</b> Directory Structure and Code Repositories</a>
<ul>
<li class="chapter" data-level="3.1" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#small-and-large-projects"><i class="fa fa-check"></i><b>3.1</b> Small and large projects</a></li>
<li class="chapter" data-level="3.2" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#directory-structure"><i class="fa fa-check"></i><b>3.2</b> Directory Structure</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#first-level-data-and-analyses"><i class="fa fa-check"></i><b>3.2.1</b> First level: data and analyses</a></li>
<li class="chapter" data-level="3.2.2" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#second-level-data"><i class="fa fa-check"></i><b>3.2.2</b> Second level: data</a></li>
<li class="chapter" data-level="3.2.3" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#second-level-projects"><i class="fa fa-check"></i><b>3.2.3</b> Second level: projects</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#code-repositories"><i class="fa fa-check"></i><b>3.3</b> Code Repositories</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#rproj-files"><i class="fa fa-check"></i><b>3.3.1</b> <code>.Rproj</code> files</a></li>
<li class="chapter" data-level="3.3.2" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#configuration-config-file"><i class="fa fa-check"></i><b>3.3.2</b> Configuration (‘config’) File</a></li>
<li class="chapter" data-level="3.3.3" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#shared-functions-file"><i class="fa fa-check"></i><b>3.3.3</b> Shared Functions File</a></li>
<li class="chapter" data-level="3.3.4" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#order-files-and-subdirectories"><i class="fa fa-check"></i><b>3.3.4</b> Order Files and Subdirectories</a></li>
<li class="chapter" data-level="3.3.5" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#use-bash-scripts-or-r-scripts-to-ensure-reproducibility"><i class="fa fa-check"></i><b>3.3.5</b> Use Bash scripts or R scripts to ensure reproducibility</a></li>
<li class="chapter" data-level="3.3.6" data-path="directory-structure-and-code-repositories.html"><a href="directory-structure-and-code-repositories.html#alternative-approach-for-code-repos"><i class="fa fa-check"></i><b>3.3.6</b> Alternative approach for code repos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="codingpractices.html"><a href="codingpractices.html"><i class="fa fa-check"></i><b>4</b> Coding Practices</a>
<ul>
<li class="chapter" data-level="4.1" data-path="codingpractices.html"><a href="codingpractices.html#organizing-scripts"><i class="fa fa-check"></i><b>4.1</b> Organizing scripts</a></li>
<li class="chapter" data-level="4.2" data-path="codingpractices.html"><a href="codingpractices.html#documenting-your-code"><i class="fa fa-check"></i><b>4.2</b> Documenting your code</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="codingpractices.html"><a href="codingpractices.html#file-headers"><i class="fa fa-check"></i><b>4.2.1</b> File headers</a></li>
<li class="chapter" data-level="4.2.2" data-path="codingpractices.html"><a href="codingpractices.html#comments-in-the-body-of-your-script"><i class="fa fa-check"></i><b>4.2.2</b> Comments in the body of your script</a></li>
<li class="chapter" data-level="4.2.3" data-path="codingpractices.html"><a href="codingpractices.html#function-documentation"><i class="fa fa-check"></i><b>4.2.3</b> Function documentation</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="codingpractices.html"><a href="codingpractices.html#object-naming"><i class="fa fa-check"></i><b>4.3</b> Object naming</a></li>
<li class="chapter" data-level="4.4" data-path="codingpractices.html"><a href="codingpractices.html#function-calls"><i class="fa fa-check"></i><b>4.4</b> Function calls</a></li>
<li class="chapter" data-level="4.5" data-path="codingpractices.html"><a href="codingpractices.html#the-here-package"><i class="fa fa-check"></i><b>4.5</b> The <code>here</code> package</a></li>
<li class="chapter" data-level="4.6" data-path="codingpractices.html"><a href="codingpractices.html#tidyverse"><i class="fa fa-check"></i><b>4.6</b> Tidyverse</a></li>
<li class="chapter" data-level="4.7" data-path="codingpractices.html"><a href="codingpractices.html#coding-with-r-and-python"><i class="fa fa-check"></i><b>4.7</b> Coding with R and Python</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="codingstyle.html"><a href="codingstyle.html"><i class="fa fa-check"></i><b>5</b> Coding Style</a>
<ul>
<li class="chapter" data-level="5.1" data-path="codingstyle.html"><a href="codingstyle.html#line-breaks"><i class="fa fa-check"></i><b>5.1</b> Line breaks</a></li>
<li class="chapter" data-level="5.2" data-path="codingstyle.html"><a href="codingstyle.html#automated-tools-for-style-and-project-workflow"><i class="fa fa-check"></i><b>5.2</b> Automated Tools for Style and Project Workflow</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="codingstyle.html"><a href="codingstyle.html#styling"><i class="fa fa-check"></i><b>5.2.1</b> Styling</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="datawrangling.html"><a href="datawrangling.html"><i class="fa fa-check"></i><b>6</b> Data Wrangling</a>
<ul>
<li class="chapter" data-level="6.1" data-path="datawrangling.html"><a href="datawrangling.html#overview"><i class="fa fa-check"></i><b>6.1</b> Overview</a></li>
<li class="chapter" data-level="6.2" data-path="datawrangling.html"><a href="datawrangling.html#cardinal-rule"><i class="fa fa-check"></i><b>6.2</b> Cardinal rule</a></li>
<li class="chapter" data-level="6.3" data-path="datawrangling.html"><a href="datawrangling.html#data-inputoutput-io"><i class="fa fa-check"></i><b>6.3</b> Data input/output (I/O)</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="datawrangling.html"><a href="datawrangling.html#excel-files"><i class="fa fa-check"></i><b>6.3.1</b> Excel files</a></li>
<li class="chapter" data-level="6.3.2" data-path="datawrangling.html"><a href="datawrangling.html#rds-vs-.rdata-files"><i class="fa fa-check"></i><b>6.3.2</b> <code>.RDS</code> vs <code>.RData</code> Files</a></li>
<li class="chapter" data-level="6.3.3" data-path="datawrangling.html"><a href="datawrangling.html#csv-files"><i class="fa fa-check"></i><b>6.3.3</b> <code>.CSV</code> Files</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="datawrangling.html"><a href="datawrangling.html#documenting-datasets"><i class="fa fa-check"></i><b>6.4</b> Documenting datasets</a></li>
<li class="chapter" data-level="6.5" data-path="datawrangling.html"><a href="datawrangling.html#mapping-data-from-untouched---final"><i class="fa fa-check"></i><b>6.5</b> Mapping data from untouched -&gt; final</a></li>
<li class="chapter" data-level="6.6" data-path="datawrangling.html"><a href="datawrangling.html#relational-data"><i class="fa fa-check"></i><b>6.6</b> Relational data</a></li>
<li class="chapter" data-level="6.7" data-path="datawrangling.html"><a href="datawrangling.html#be-careful-with-joins-merges"><i class="fa fa-check"></i><b>6.7</b> Be careful with joins / merges</a></li>
<li class="chapter" data-level="6.8" data-path="datawrangling.html"><a href="datawrangling.html#reshaping-data"><i class="fa fa-check"></i><b>6.8</b> Reshaping data</a></li>
<li class="chapter" data-level="6.9" data-path="datawrangling.html"><a href="datawrangling.html#data-cleaning"><i class="fa fa-check"></i><b>6.9</b> Data cleaning</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="publicdata.html"><a href="publicdata.html"><i class="fa fa-check"></i><b>7</b> Making Data Public</a>
<ul>
<li class="chapter" data-level="7.1" data-path="publicdata.html"><a href="publicdata.html#overview-1"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="publicdata.html"><a href="publicdata.html#removing-phi"><i class="fa fa-check"></i><b>7.2</b> Removing PHI</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="publicdata.html"><a href="publicdata.html#personal-information"><i class="fa fa-check"></i><b>7.2.1</b> Personal information</a></li>
<li class="chapter" data-level="7.2.2" data-path="publicdata.html"><a href="publicdata.html#dates"><i class="fa fa-check"></i><b>7.2.2</b> Dates</a></li>
<li class="chapter" data-level="7.2.3" data-path="publicdata.html"><a href="publicdata.html#geographic-information"><i class="fa fa-check"></i><b>7.2.3</b> Geographic information</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="publicdata.html"><a href="publicdata.html#create-public-ids"><i class="fa fa-check"></i><b>7.3</b> Create public IDs</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="publicdata.html"><a href="publicdata.html#rationale"><i class="fa fa-check"></i><b>7.3.1</b> Rationale</a></li>
<li class="chapter" data-level="7.3.2" data-path="publicdata.html"><a href="publicdata.html#a-single-set-of-public-ids-for-each-study"><i class="fa fa-check"></i><b>7.3.2</b> A single set of public IDs for each study</a></li>
<li class="chapter" data-level="7.3.3" data-path="publicdata.html"><a href="publicdata.html#example-scripts"><i class="fa fa-check"></i><b>7.3.3</b> Example scripts</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="publicdata.html"><a href="publicdata.html#create-a-data-repository"><i class="fa fa-check"></i><b>7.4</b> Create a data repository</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="publicdata.html"><a href="publicdata.html#steps-for-creating-an-open-science-framework-osf-repository"><i class="fa fa-check"></i><b>7.4.1</b> Steps for creating an Open Science Framework (OSF) repository:</a></li>
<li class="chapter" data-level="7.4.2" data-path="publicdata.html"><a href="publicdata.html#steps-for-creating-a-dryad-data-repository"><i class="fa fa-check"></i><b>7.4.2</b> Steps for creating a Dryad data repository:</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="publicdata.html"><a href="publicdata.html#edit-and-test-analysis-scripts"><i class="fa fa-check"></i><b>7.5</b> Edit and test analysis scripts</a></li>
<li class="chapter" data-level="7.6" data-path="publicdata.html"><a href="publicdata.html#create-a-public-github-page-for-public-scripts"><i class="fa fa-check"></i><b>7.6</b> Create a public GitHub page for public scripts</a></li>
<li class="chapter" data-level="7.7" data-path="publicdata.html"><a href="publicdata.html#go-live"><i class="fa fa-check"></i><b>7.7</b> Go live</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="bigdata.html"><a href="bigdata.html"><i class="fa fa-check"></i><b>8</b> Working with Big Data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="bigdata.html"><a href="bigdata.html#basics"><i class="fa fa-check"></i><b>8.1</b> Basics</a></li>
<li class="chapter" data-level="8.2" data-path="bigdata.html"><a href="bigdata.html#using-downsampled-data"><i class="fa fa-check"></i><b>8.2</b> Using downsampled data</a></li>
<li class="chapter" data-level="8.3" data-path="bigdata.html"><a href="bigdata.html#big-data-unix"><i class="fa fa-check"></i><b>8.3</b> Unix</a></li>
<li class="chapter" data-level="8.4" data-path="bigdata.html"><a href="bigdata.html#sql-and-dbplyr"><i class="fa fa-check"></i><b>8.4</b> SQL and <code>dbplyr</code></a></li>
<li class="chapter" data-level="8.5" data-path="bigdata.html"><a href="bigdata.html#data.table-and-dtplyr"><i class="fa fa-check"></i><b>8.5</b> <code>data.table</code> and <code>dtplyr</code></a></li>
<li class="chapter" data-level="8.6" data-path="bigdata.html"><a href="bigdata.html#ff-bigmemory-biglm"><i class="fa fa-check"></i><b>8.6</b> <code>ff</code>, <code>bigmemory</code>, <code>biglm</code></a></li>
<li class="chapter" data-level="8.7" data-path="bigdata.html"><a href="bigdata.html#parallel-computing"><i class="fa fa-check"></i><b>8.7</b> Parallel computing</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="bigdata.html"><a href="bigdata.html#embarrassingly-parallel-problems"><i class="fa fa-check"></i><b>8.7.1</b> Embarrassingly Parallel Problems</a></li>
<li class="chapter" data-level="8.7.2" data-path="bigdata.html"><a href="bigdata.html#packages"><i class="fa fa-check"></i><b>8.7.2</b> Packages</a></li>
<li class="chapter" data-level="8.7.3" data-path="bigdata.html"><a href="bigdata.html#gpus"><i class="fa fa-check"></i><b>8.7.3</b> GPU’s</a></li>
<li class="chapter" data-level="8.7.4" data-path="bigdata.html"><a href="bigdata.html#the-mapreduce-paradigm"><i class="fa fa-check"></i><b>8.7.4</b> The <em>MapReduce</em> paradigm</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="bigdata.html"><a href="bigdata.html#optimal-rstudio-set-up"><i class="fa fa-check"></i><b>8.8</b> Optimal RStudio set up</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>9</b> GitHub and Version Control</a>
<ul>
<li class="chapter" data-level="9.1" data-path="github.html"><a href="github.html#basics-1"><i class="fa fa-check"></i><b>9.1</b> Basics</a></li>
<li class="chapter" data-level="9.2" data-path="github.html"><a href="github.html#git-branching"><i class="fa fa-check"></i><b>9.2</b> Git Branching</a></li>
<li class="chapter" data-level="9.3" data-path="github.html"><a href="github.html#example-workflow"><i class="fa fa-check"></i><b>9.3</b> Example Workflow</a></li>
<li class="chapter" data-level="9.4" data-path="github.html"><a href="github.html#commonly-used-git-commands"><i class="fa fa-check"></i><b>9.4</b> Commonly Used Git Commands</a></li>
<li class="chapter" data-level="9.5" data-path="github.html"><a href="github.html#how-often-should-i-commit"><i class="fa fa-check"></i><b>9.5</b> How often should I commit?</a></li>
<li class="chapter" data-level="9.6" data-path="github.html"><a href="github.html#what-should-be-pushed-to-github"><i class="fa fa-check"></i><b>9.6</b> What should be pushed to Github?</a></li>
<li class="chapter" data-level="9.7" data-path="github.html"><a href="github.html#how-should-i-describe-my-commit"><i class="fa fa-check"></i><b>9.7</b> How should I describe my commit?</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="unix.html"><a href="unix.html"><i class="fa fa-check"></i><b>10</b> UNIX Commands</a>
<ul>
<li class="chapter" data-level="10.1" data-path="unix.html"><a href="unix.html#environment"><i class="fa fa-check"></i><b>10.1</b> Environment</a></li>
<li class="chapter" data-level="10.2" data-path="unix.html"><a href="unix.html#basics-2"><i class="fa fa-check"></i><b>10.2</b> Basics</a></li>
<li class="chapter" data-level="10.3" data-path="unix.html"><a href="unix.html#syntax-for-both-macwindows"><i class="fa fa-check"></i><b>10.3</b> Syntax for both Mac/Windows</a></li>
<li class="chapter" data-level="10.4" data-path="unix.html"><a href="unix.html#running-bash-scripts"><i class="fa fa-check"></i><b>10.4</b> Running Bash Scripts</a></li>
<li class="chapter" data-level="10.5" data-path="unix.html"><a href="unix.html#running-rscripts-in-windows"><i class="fa fa-check"></i><b>10.5</b> Running Rscripts in Windows</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="unix.html"><a href="unix.html#common-mistakes"><i class="fa fa-check"></i><b>10.5.1</b> Common Mistakes</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="unix.html"><a href="unix.html#checking-tasks-and-killing-jobs"><i class="fa fa-check"></i><b>10.6</b> Checking tasks and killing jobs</a></li>
<li class="chapter" data-level="10.7" data-path="unix.html"><a href="unix.html#running-big-jobs"><i class="fa fa-check"></i><b>10.7</b> Running big jobs</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html"><i class="fa fa-check"></i><b>11</b> Building Automated Markdown Reports</a>
<ul>
<li class="chapter" data-level="11.1" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#setting-up-the-markdown"><i class="fa fa-check"></i><b>11.1</b> Setting up the markdown</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#yaml"><i class="fa fa-check"></i><b>11.1.1</b> YAML</a></li>
<li class="chapter" data-level="11.1.2" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#directory-structure-1"><i class="fa fa-check"></i><b>11.1.2</b> Directory structure</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#automating-the-data-export-process"><i class="fa fa-check"></i><b>11.2</b> Automating the data export process</a></li>
<li class="chapter" data-level="11.3" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#loading-the-data"><i class="fa fa-check"></i><b>11.3</b> Loading the data</a></li>
<li class="chapter" data-level="11.4" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#data-cleaningprocessing"><i class="fa fa-check"></i><b>11.4</b> Data cleaning/processing</a></li>
<li class="chapter" data-level="11.5" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#data-monitoring"><i class="fa fa-check"></i><b>11.5</b> Data monitoring</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#data-validation"><i class="fa fa-check"></i><b>11.5.1</b> Data validation</a></li>
<li class="chapter" data-level="11.5.2" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#data-presentation-dsmc-style"><i class="fa fa-check"></i><b>11.5.2</b> Data presentation (DSMC-style)</a></li>
<li class="chapter" data-level="11.5.3" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#appendix-if-necessary"><i class="fa fa-check"></i><b>11.5.3</b> Appendix (if necessary)</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="building-automated-markdown-reports.html"><a href="building-automated-markdown-reports.html#summary"><i class="fa fa-check"></i><b>11.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="commcoord.html"><a href="commcoord.html"><i class="fa fa-check"></i><b>12</b> Communication and Coordination</a>
<ul>
<li class="chapter" data-level="12.1" data-path="commcoord.html"><a href="commcoord.html#slack"><i class="fa fa-check"></i><b>12.1</b> Slack</a></li>
<li class="chapter" data-level="12.2" data-path="commcoord.html"><a href="commcoord.html#email"><i class="fa fa-check"></i><b>12.2</b> Email</a></li>
<li class="chapter" data-level="12.3" data-path="commcoord.html"><a href="commcoord.html#trello"><i class="fa fa-check"></i><b>12.3</b> Trello</a></li>
<li class="chapter" data-level="12.4" data-path="commcoord.html"><a href="commcoord.html#google-drive"><i class="fa fa-check"></i><b>12.4</b> Google Drive</a></li>
<li class="chapter" data-level="12.5" data-path="commcoord.html"><a href="commcoord.html#calendar-meetings"><i class="fa fa-check"></i><b>12.5</b> Calendar / Meetings</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="code-of-conduct.html"><a href="code-of-conduct.html"><i class="fa fa-check"></i><b>13</b> Code of conduct</a>
<ul>
<li class="chapter" data-level="13.1" data-path="code-of-conduct.html"><a href="code-of-conduct.html#group-culture"><i class="fa fa-check"></i><b>13.1</b> Group culture</a></li>
<li class="chapter" data-level="13.2" data-path="code-of-conduct.html"><a href="code-of-conduct.html#protecting-human-subjects"><i class="fa fa-check"></i><b>13.2</b> Protecting human subjects</a></li>
<li class="chapter" data-level="13.3" data-path="code-of-conduct.html"><a href="code-of-conduct.html#authorship"><i class="fa fa-check"></i><b>13.3</b> Authorship</a></li>
<li class="chapter" data-level="13.4" data-path="code-of-conduct.html"><a href="code-of-conduct.html#work-hours"><i class="fa fa-check"></i><b>13.4</b> Work hours</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="resources.html"><a href="resources.html"><i class="fa fa-check"></i><b>14</b> Additional Resources</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Proctor Foundation Data Science Handbook</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="directory-structure-and-code-repositories" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Directory Structure and Code Repositories<a href="directory-structure-and-code-repositories.html#directory-structure-and-code-repositories" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><em>Contributors: Kunal Mishra, Jade Benjamin-Chung, Ben Arnold</em></p>
<p>The backbone of your project workflow is the file directory so it makes sense to spend time organizing the directory. Note that <code>directory</code> is the technical term for the system used to organize individual files. Most non-UNIX environments use a folder analogy, and directory and folder can be used interchangeably in a lot of cases. A well organized directory will make everything that follows much easier. Just like a well designed kitchen is essential to enjoy cooking (and avoid clutter), a well designed directory helps you enjoy working and stay organized in a complex project with literally thousands of related files. Just like a disorganized kitchen (“now where did I put that spatula?”) a disorganized project directory creates confusion, lost time, stress, and mistakes.</p>
<p>Another huge advantage of maintaining a regular/predictable directory structure within a project and across projects is that it makes it more intuitive. When a directory is intuitive, it is easier to work collaboratively across a larger team; everybody can predict (at least approximately) where files should be.</p>
<p>Nested within your directory will be a <code>code repository</code>. Sometimes we find it useful to manage the code repository using version control, such as git/GitHub.</p>
<p>Other chapters will discuss <a href="codingpractices.html#codingpractices">coding practices</a>, <a href="#datamanagement">data management</a>, and <a href="github.html#github">GitHub/version control</a> that will build from the material here.</p>
<p>Carrying the kitchen analogy further: here, we are designing the kitchen. Then, we’ll discuss approaches for how to cook in the kitchen that we designed/built.</p>
<div id="small-and-large-projects" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Small and large projects<a href="directory-structure-and-code-repositories.html#small-and-large-projects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Our experience is that the overwhelming majority of projects come in two sizes: small and large. We recommend setting up your directory structure depending on how large you expect the project to be. Sometimes, small projects evolve into large projects, but only occasionally. A small project is something like a single data analysis with a single published article in mind. A large project is an epidemiologic field study, where there are multiple different types of data and different types of analyses (e.g., sample size calculations, survey data, biospecimens, substudies, etc.).</p>
<hr />
<p><strong>Small project:</strong> There is essentially one dataset and a single, coherent analysis. For example, a simulation study or a methodology study that will lead to a single article.</p>
<p><strong>Large project:</strong> A field study that includes multiple activities, each of which generates data files. Multiple analyses are envisioned, leading to multiple scientific articles.</p>
<hr />
<p>Large projects are more common and more complicated. Most of this chapter focuses on large project organization (small projects can be thought of as essentially one piece of a large project).</p>
</div>
<div id="directory-structure" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Directory Structure<a href="directory-structure-and-code-repositories.html#directory-structure" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the example below, we follow a basic directory naming convention that makes working in UNIX and typing directory statements in programs much easier:</p>
<ul>
<li><strong>short names</strong></li>
<li><strong>no spaces in the names</strong> (not essential but a personal preference. Can use <code>_</code> or <code>-</code> instead)</li>
<li><strong>lower case</strong> (not essential, again, personal preferences vary!)</li>
</ul>
<p>For example, Ben completed a study in Tamil Nadu, India during his dissertation to study the effect of improvements in water supply and sanitation on child health. Instead of naming the directory <code>Tamil Nadu</code> or <code>Tamil Nadu WASH Study</code>, he used <code>trichy</code> instead (a colloquial name for the city near the study, Tiruchirappalli), which was much easier to type in the terminal and in directory statements. A short name helps make directory references easier while programming.</p>
<div id="first-level-data-and-analyses" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> First level: data and analyses<a href="directory-structure-and-code-repositories.html#first-level-data-and-analyses" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="figure"><span style="display:block;" id="fig:dir-fig1"></span>
<img src="images/mystudy-dir-fig1.png" alt="Example directory for `mystudy`" width="75%" />
<p class="caption">
Figure 3.1: Example directory for <code>mystudy</code>
</p>
</div>
<p>Start by dividing a project into major activities. In the example abpve, the project is named <code>mystudy</code>. There is a <code>data</code> subdirectory (more in a sec), and then three major activities, each corresponding to a separate analysis: <code>primary-analysis</code>,<code>secondary-analysis-1</code>, and <code>secondary-analysis-2</code>. In a real project, the names could be more informative, such as “trachoma-qpcr”. Also, a real project might also include many additional subdirectories related to administrative and logistics activities that do not relate to data science, such as irb, travel, contracts, budget, survey forms, etc.).</p>
<p>Dividing files into major activities helps keep things organized for really big projects. In a multi-site study, consider including a directory for each site before splitting files into major activities. Ideally, analyses will not span major activity subdirectories in a project folder, but sometimes you can’t predict/avoid that from happening.</p>
</div>
<div id="second-level-data" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Second level: data<a href="directory-structure-and-code-repositories.html#second-level-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><img src="images/mystudy-dir-fig2.png" width="75%" /></p>
<p>Each project will include a <code>data</code> directory. We recommend organizing it into 3 parts: <code>untouched</code>, <code>temp</code>, and <code>final</code>. Often, it is useful to include a fourth subdirectory called <code>public</code> for sharing public versions of datasets.</p>
<p>The <code>untouched</code> directory includes all untouched datasets that are used for the study. Once saved in the directory never touch them; you will read them into the work flow, but <strong>never, ever save over them</strong>. If the study has repeated extracts from rolling data collection or electronic health records, consider subdirectories within <code>untouched</code> that are indexed by date.</p>
<p>The <code>temp</code> directory (optional, not essential) includes temporary files that you might generate during the data management process. This is mainly a space for experimentation. As a rule, never save anything in the temp directory that you cannot delete. Regularly delete files in the temp directory to save disk space.</p>
<p>The <code>final</code> directory includes final datasets for the activity. Final datasets are de-identified and require no further processing; they are clean and ready for analysis. They should be accompanied by meta-data, which at minimum includes the data’s provenance (i.e., how it was created) and what it includes (i.e., level of the data, plus variable coding/labels/descriptions). Clean/final datasets generated by one analysis might be reused in another.</p>
<p><strong>NOTE:</strong> In very large projects, we occasionally need to further stratify the <code>data</code> directory into different subdirectories, according to data type. For example, in the AVENIR trial we had child mortality data measurements, and completely separate data from antimicrobial resistance (AMR) monitoring. These data were so myriad and different, that they needed to be curated in separate directories.</p>
</div>
<div id="second-level-projects" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Second level: projects<a href="directory-structure-and-code-repositories.html#second-level-projects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We recommend maintaining a separate project subdirectory to hold each major analysis in a project. In this example, there are four workflows with generic names from the view of trial: <code>core-data-processing</code>, <code>primary-analysis</code>, <code>secondary-analysis-1</code>, <code>secondary-analysis-2</code>.</p>
<p><strong>IMPORTANT:</strong> We recommend consolidating the core data processing for the study in its own project. <strong>Core data processing</strong> is data processing that creates a shared asset across multiple, downstream analyses. It includes the scripts for the data processing workflow that take data from <code>untouched</code> to <code>final</code> in the previous section.</p>
<p><img src="images/mystudy-dir-fig3.png" width="75%" /></p>
<p>Think of each analysis as the scope of all of the work for a single, published paper. We recommend dividing the analysis project into a space for computational notebooks / scripts (i.e., a <code>code repository</code>), and a second for their output. The reason for the split is to make it easier to use version control (should you choose) for the code. Version control like <code>git</code> and <code>GitHub</code> (see the <a href="#GitHub">Chapter on GitHub</a>) works well for text files but isn’t really designed for binary files such as images (.png), datasets (.rds), or PDF files (.pdf). It is certainly possible to use git with those file types, but since git makes a new copy of the file every time it is changed the git repo can get horribly bloated and takes up too much space on disk. Consolidating the output into a separate directory makes it more obvious that it isn’t under version control. In this example, there are separate parts for code (<code>R</code>) and output (<code>output</code>). Output could include figures, tables, or saved analysis results stored as data files (.rds or .csv). Another conventional name for the code repository is <code>src</code> as an alternative to <code>R</code> if you use other languages.</p>
<p>If a project creates unique datasets or relies on new data that is unique to the project and not a shared asset for the study (e.g., publicly available data), then the project itself might include a <code>data</code> subdirectory. HOWEVER, it should not include a direct copy of shared datasets stored in the <code>mystudy/data</code> repository – be sure to keep only one copy of each shared dataset in the project.</p>
<p><img src="images/mystudy-dir-fig4.png" width="75%" /></p>
<hr />
<p><strong>Interdependence between analyses:</strong> Sometimes a result from an analysis might be a cleaned dataset that could feed into future, distinct analyses. This is quite common, for example, in large trials where a set of baseline characteristics might be used in multiple separate papers for different endpoints, either for assessing balance of the trial population or subgroups, or used as adjustment covariates in additional analyses of the trial. In this case, the analysis-specific data processing should be <em>moved upstream</em> into the <code>projects/core-data-processing</code> workflow, and should generate a shared, final dataset in the <code>data/final</code> directory.</p>
<hr />
</div>
</div>
<div id="code-repositories" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Code Repositories<a href="directory-structure-and-code-repositories.html#code-repositories" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Maintain a separate code repository for each major analysis activity (last section).</p>
<p>We recommend the following structure for a code repository. This is the actual repository for the <a href="https://github.com/proctor-ucsf/AVENIR-primary">AVENIR trial primary analysis</a>.</p>
<p><img src="images/mystudy-dir-fig5.png" width="75%" /></p>
<p>Note that in this example, there is no actual data processing in the project. All of the data processing was consolidated upstream in a separate <code>core-data-processing</code> project for the trial. Sometimes, an analysis/project will include limited project-specific data processing that is not shared across the trial. If project-specific data processing is required, it would be one of the first scripts in the workflow. This helps ensure work conducted in step 1 of your workflow stays upstream from all analyses (see <a href="workflows.html#workflows">Chapter on workflows</a>).</p>
<p>In this example, there is a script that downloads public datasets into a local repository instead. Also note that in this example, all of the scripts are <code>.Rmd</code> files. R scripts <code>.R</code> are equally useful.</p>
<p>You can glean some important takeaways from what you <em>do</em> see.</p>
<div id="rproj-files" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> <code>.Rproj</code> files<a href="directory-structure-and-code-repositories.html#rproj-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>An “R Project” can be created within RStudio by going to <code>File &gt;&gt; New Project</code>. Depending on where you are with your research, choose the most appropriate option. This will save preferences, working directories, and even the results of running code/data (though we recommend starting from scratch each time you open your project, in general). Then, ensure that whenever you are working on that specific research project, you open your created project to enable the full utility of <code>.Rproj</code> files. This also automatically sets the directory to the top level of the project.</p>
</div>
<div id="configuration-config-file" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Configuration (‘config’) File<a href="directory-structure-and-code-repositories.html#configuration-config-file" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This is the single most important file for your project. It will be responsible for a variety of common tasks, declare global variables, load functions, declare paths, and more. <em>Every other file in the project</em> will begin with <code>source("0-config")</code>, and its role is to reduce redundancy and create an abstraction layer that allows you to make changes in one place (<code>0-config.R</code>) rather than 5 different files. To this end, paths that will be referenced in multiple scripts (e.g., a <code>clean_data_path</code>) can be declared in <code>0-config.R</code> and simply referred to by its variable name in scripts. If you ever want to change things, rename them, or even switch from a downsample to the full data, all you would then to need to do is modify the path in one place and the change will automatically update throughout your project. See the example config file for more details. The paths defined in the <code>0-config.R</code> file assume that users have opened the <code>.Rproj</code> file, which sets the directory to the top level of the project.</p>
<p>This <a href="https://github.com/jadebc-berkeley/WBB-STH-Kato-Katz">GitHub repository</a> that has replication files for <a href="https://www.biorxiv.org/content/10.1101/629501v1">this study</a> includes an example of a streamlined <code>config.R</code> file, with all packages loaded and directory references defined.</p>
</div>
<div id="shared-functions-file" class="section level3 hasAnchor" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Shared Functions File<a href="directory-structure-and-code-repositories.html#shared-functions-file" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you write a custom function for an analysis and need to use it repeatedly across multiple analysis scripts, then it is better to consolidate it into a single shared functions script and source that file into the analysis scripts. The reason for this is that it enables you to edit the function in a single place and ensure that the changes are implemented across your entire workflow. In extreme cases, you might have so many shared functions that you need an entire subdirectory with separate scripts. <a href="https://github.com/HBGD-UCB/ki-longitudinal-manuscripts/">This repository</a> includes a very complex example (<code>0-project-functions</code>) of a large analysis published in a <em>Nature</em> series (one of three articles: <a href="https://www.nature.com/articles/s41586-023-06501-x" class="uri">https://www.nature.com/articles/s41586-023-06501-x</a>)</p>
</div>
<div id="order-files-and-subdirectories" class="section level3 hasAnchor" number="3.3.4">
<h3><span class="header-section-number">3.3.4</span> Order Files and Subdirectories<a href="directory-structure-and-code-repositories.html#order-files-and-subdirectories" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This makes the jumble of alphabetized filenames much more coherent and places similar code and files next to one another. Although sometimes there is not a linear progression from 1 to 2 to 3, in general the structure helps reflect how data flows from start to finish.</p>
<p><strong>If you take nothing else away from this guide, this is the single most helpful suggestion to make your workflow more coherent.</strong> Often the particular order of files will be in flux until an analysis is close to completion. At that time it is important to review file order and naming and reproduce everything prior to drafting a manuscript.</p>
</div>
<div id="use-bash-scripts-or-r-scripts-to-ensure-reproducibility" class="section level3 hasAnchor" number="3.3.5">
<h3><span class="header-section-number">3.3.5</span> Use Bash scripts or R scripts to ensure reproducibility<a href="directory-structure-and-code-repositories.html#use-bash-scripts-or-r-scripts-to-ensure-reproducibility" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Bash scripts are useful components of a reproducible workflow. If your workflow is in R scripts, bash (<code>.sh</code>) can be useful to run the entire workflow in order. See the <a href="unix.html#unix">UNIX Chapter</a> for further details. If your workflow is mainly R markdown or a mix of <code>.R</code> and <code>.Rmd</code> files, sometimes it is easier to simply make a single R script to run the workflow. In the AVENIR example (above), that is what we used <a href="https://github.com/proctor-ucsf/AVENIR-primary/blob/main/R/AVENIR-primary-run-all.R">AVENIR-primary-run-all.R</a>.</p>
</div>
<div id="alternative-approach-for-code-repos" class="section level3 hasAnchor" number="3.3.6">
<h3><span class="header-section-number">3.3.6</span> Alternative approach for code repos<a href="directory-structure-and-code-repositories.html#alternative-approach-for-code-repos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another approach for organizing your code repository is to name all of your scripts according to the final figure or table that they generate for a particular article. In our experience, this <em>only</em> works for small projects, with a single set of coherent analyses. Here, you might have an alternative structure such as:</p>
<pre><code>.gitignore
primary-analysis.Rproj
0-config.R
0-shared-functions.R
0-primary-analysis-run-all.sh
1-dm /
    0-dm-run-all.sh
    1-format-enrollment-data.R
    2-format-adherence-data.R
    3-format-LAZ-measurements.R
Fig1-consort.Rmd
Fig2-adherence.Rmd
Fig3-1-laz-analysis.Rmd
Fig3-2-laz-make-figure.Rmd</code></pre>
<p>There is still a need for a separate data management directory (e.g., <code>dm</code>) to ensure that workflow is upstream from the analysis (more below in <a href="unix.html#unix">chapter on UNIX</a>), but then scripts are all together with clear labels. If a figure requires two stages to the analysis, then you can name them sequentially, such as <code>Fig3-1-laz-analysis.Rmd</code>, <code>Fig3-2-laz-make-figure.Rmd</code>. There is no way to divine how all of the analyses will neatly fit into files that correspond to separate figures. Instead, they will converge on these file names through the writing process, often through comsolidation or recombination.</p>
<p>One example of a small repo is here:
<a href="https://github.com/ben-arnold/enterics-seroepi" class="uri">https://github.com/ben-arnold/enterics-seroepi</a></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="workflows.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="codingpractices.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["dcc-handbook.pdf", "dcc-handbook.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
